<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Django 1.7 release notes &mdash; Django 1.8.2.dev20150505153848 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.2.dev20150505153848',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Django 1.8.2.dev20150505153848 documentation" href="../index.html" />
    <link rel="up" title="Release notes" href="index.html" />
    <link rel="next" title="Django 1.6.11 release notes" href="1.6.11.html" />
    <link rel="prev" title="Django 1.7.1 release notes" href="1.7.1.html" />



 
<script type="text/javascript" src="../templatebuiltins.js"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>


  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django 1.8.2.dev20150505153848 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="1.7.1.html" title="Django 1.7.1 release notes">previous</a>
     |
    <a href="index.html" title="Release notes" accesskey="U">up</a>
   |
    <a href="1.6.11.html" title="Django 1.6.11 release notes">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-1.7">
            
  <div class="section" id="s-django-1-7-release-notes">
<span id="django-1-7-release-notes"></span><h1>Django 1.7 release notes<a class="headerlink" href="#django-1-7-release-notes" title="Permalink to this headline">¶</a></h1>
<p><em>September 2, 2014</em></p>
<p>Welcome to Django 1.7!</p>
<p>These release notes cover the <a class="reference internal" href="#what-s-new-in-django-1-7">new features</a>, as well as some <a class="reference internal" href="#backwards-incompatible-changes-in-1-7">backwards
incompatible changes</a> you&#8217;ll want to be aware of when upgrading from Django
1.6 or older versions. We&#8217;ve <a class="reference internal" href="#features-deprecated-in-1-7">begun the deprecation process for some features</a>,
and some features have reached the end of their deprecation process and
<a class="reference internal" href="#features-removed-in-1-7">have been removed</a>.</p>
<div class="section" id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Python compatibility<a class="headerlink" href="#python-compatibility" title="Permalink to this headline">¶</a></h2>
<p>Django 1.7 requires Python 2.7 or above, though we <strong>highly recommend</strong>
the latest minor release. Support for Python 2.6 has been dropped and support
for Python 3.4 has been added.</p>
<p>This change should affect only a small number of Django users, as most
operating-system vendors today are shipping Python 2.7 or newer as their default
version. If you&#8217;re still using Python 2.6, however, you&#8217;ll need to stick to
Django 1.6 until you can upgrade your Python version. Per <a class="reference internal" href="../internals/release-process.html"><em>our support
policy</em></a>, Django 1.6 will continue to receive
security support until the release of Django 1.8.</p>
</div>
<div class="section" id="s-what-s-new-in-django-1-7">
<span id="what-s-new-in-django-1-7"></span><h2>What&#8217;s new in Django 1.7<a class="headerlink" href="#what-s-new-in-django-1-7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-schema-migrations">
<span id="schema-migrations"></span><h3>Schema migrations<a class="headerlink" href="#schema-migrations" title="Permalink to this headline">¶</a></h3>
<p>Django now has built-in support for schema migrations. It allows models
to be updated, changed, and deleted by creating migration files that represent
the model changes and which can be run on any development, staging or production
database.</p>
<p>Migrations are covered in <a class="reference internal" href="../topics/migrations.html"><em>their own documentation</em></a>,
but a few of the key features are:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">syncdb</span></tt> has been deprecated and replaced by <tt class="docutils literal"><span class="pre">migrate</span></tt>. Don&#8217;t worry -
calls to <tt class="docutils literal"><span class="pre">syncdb</span></tt> will still work as before.</p>
</li>
<li><p class="first">A new <tt class="docutils literal"><span class="pre">makemigrations</span></tt> command provides an easy way to autodetect changes
to your models and make migrations for them.</p>
<p><a class="reference internal" href="../ref/signals.html#django.db.models.signals.pre_syncdb" title="django.db.models.signals.pre_syncdb"><tt class="xref py py-data docutils literal"><span class="pre">pre_syncdb</span></tt></a> and
<a class="reference internal" href="../ref/signals.html#django.db.models.signals.post_syncdb" title="django.db.models.signals.post_syncdb"><tt class="xref py py-data docutils literal"><span class="pre">post_syncdb</span></tt></a> have been deprecated,
to be replaced by <a class="reference internal" href="../ref/signals.html#django.db.models.signals.pre_migrate" title="django.db.models.signals.pre_migrate"><tt class="xref py py-data docutils literal"><span class="pre">pre_migrate</span></tt></a> and
<a class="reference internal" href="../ref/signals.html#django.db.models.signals.post_migrate" title="django.db.models.signals.post_migrate"><tt class="xref py py-data docutils literal"><span class="pre">post_migrate</span></tt></a> respectively. These
new signals have slightly different arguments. Check the
documentation for details.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">allow_syncdb</span></tt> method on database routers is now called <tt class="docutils literal"><span class="pre">allow_migrate</span></tt>,
but still performs the same function. Routers with <tt class="docutils literal"><span class="pre">allow_syncdb</span></tt> methods
will still work, but that method name is deprecated and you should change
it as soon as possible (nothing more than renaming is required).</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">initial_data</span></tt> fixtures are no longer loaded for apps with migrations; if
you want to load initial data for an app, we suggest you create a migration for
your application and define a <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunPython" title="django.db.migrations.operations.RunPython"><tt class="xref py py-class docutils literal"><span class="pre">RunPython</span></tt></a>
or <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunSQL" title="django.db.migrations.operations.RunSQL"><tt class="xref py py-class docutils literal"><span class="pre">RunSQL</span></tt></a> operation in the <tt class="docutils literal"><span class="pre">operations</span></tt> section of the migration.</p>
</li>
<li><p class="first">Test rollback behavior is different for apps with migrations; in particular,
Django will no longer emulate rollbacks on non-transactional databases or
inside <tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt> <a class="reference internal" href="../topics/testing/overview.html#test-case-serialized-rollback"><em>unless specifically requested</em></a>.</p>
</li>
<li><p class="first">It is not advised to have apps without migrations depend on (have a
<a class="reference internal" href="../ref/models/fields.html#ref-foreignkey"><em>ForeignKey</em></a> or <a class="reference internal" href="../ref/models/fields.html#ref-manytomany"><em>ManyToManyField</em></a> to) apps with migrations. Read the
<a class="reference internal" href="../topics/migrations.html#unmigrated-dependencies"><em>dependencies documentation</em></a> for more.</p>
</li>
<li><p class="first">If you are upgrading from South, see our <a class="reference internal" href="../topics/migrations.html#upgrading-from-south"><em>Upgrading from South</em></a>
documentation, and third-party app authors should read the
<a class="reference external" href="http://south.readthedocs.org/en/latest/releasenotes/1.0.html#library-migration-path">South 1.0 release notes</a>
for details on how to support South and Django migrations simultaneously.</p>
</li>
</ul>
</div>
<div class="section" id="s-app-loading-refactor">
<span id="s-app-loading-refactor-17-release-note"></span><span id="app-loading-refactor"></span><span id="app-loading-refactor-17-release-note"></span><h3>App-loading refactor<a class="headerlink" href="#app-loading-refactor" title="Permalink to this headline">¶</a></h3>
<p>Historically, Django applications were tightly linked to models. A singleton
known as the &#8220;app cache&#8221; dealt with both installed applications and models.
The models module was used as an identifier for applications in many APIs.</p>
<p>As the concept of <a class="reference internal" href="../ref/applications.html"><em>Django applications</em></a> matured, this
code showed some shortcomings. It has been refactored into an &#8220;app registry&#8221;
where models modules no longer have a central role and where it&#8217;s possible to
attach configuration data to applications.</p>
<p>Improvements thus far include:</p>
<ul class="simple">
<li>Applications can run code at startup, before Django does anything else, with
the <a class="reference internal" href="../ref/applications.html#django.apps.AppConfig.ready" title="django.apps.AppConfig.ready"><tt class="xref py py-meth docutils literal"><span class="pre">ready()</span></tt></a> method of their configuration.</li>
<li>Application labels are assigned correctly to models even when they&#8217;re
defined outside of <tt class="docutils literal"><span class="pre">models.py</span></tt>. You don&#8217;t have to set
<a class="reference internal" href="../ref/models/options.html#django.db.models.Options.app_label" title="django.db.models.Options.app_label"><tt class="xref py py-attr docutils literal"><span class="pre">app_label</span></tt></a> explicitly any more.</li>
<li>It is possible to omit <tt class="docutils literal"><span class="pre">models.py</span></tt> entirely if an application doesn&#8217;t
have any models.</li>
<li>Applications can be relabeled with the <a class="reference internal" href="../ref/applications.html#django.apps.AppConfig.label" title="django.apps.AppConfig.label"><tt class="xref py py-attr docutils literal"><span class="pre">label</span></tt></a>
attribute of application configurations, to work around label conflicts.</li>
<li>The name of applications can be customized in the admin with the
<a class="reference internal" href="../ref/applications.html#django.apps.AppConfig.verbose_name" title="django.apps.AppConfig.verbose_name"><tt class="xref py py-attr docutils literal"><span class="pre">verbose_name</span></tt></a> of application configurations.</li>
<li>The admin automatically calls <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.autodiscover" title="django.contrib.admin.autodiscover"><tt class="xref py py-func docutils literal"><span class="pre">autodiscover()</span></tt></a>
when Django starts. You can consequently remove this line from your
URLconf.</li>
<li>Django imports all application configurations and models as soon as it
starts, through a deterministic and straightforward process. This should
make it easier to diagnose import issues such as import loops.</li>
</ul>
</div>
<div class="section" id="s-new-method-on-field-subclasses">
<span id="new-method-on-field-subclasses"></span><h3>New method on Field subclasses<a class="headerlink" href="#new-method-on-field-subclasses" title="Permalink to this headline">¶</a></h3>
<p>To help power both schema migrations and to enable easier addition of
composite keys in future releases of Django, the
<a class="reference internal" href="../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> API now has a new required method:
<tt class="docutils literal"><span class="pre">deconstruct()</span></tt>.</p>
<p>This method takes no arguments, and returns a tuple of four items:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt>: The field&#8217;s attribute name on its parent model, or None if it is not part of a model</li>
<li><tt class="docutils literal"><span class="pre">path</span></tt>: A dotted, Python path to the class of this field, including the class name.</li>
<li><tt class="docutils literal"><span class="pre">args</span></tt>: Positional arguments, as a list</li>
<li><tt class="docutils literal"><span class="pre">kwargs</span></tt>: Keyword arguments, as a dict</li>
</ul>
<p>These four values allow any field to be serialized into a file, as well as
allowing the field to be copied safely, both essential parts of these new features.</p>
<p>This change should not affect you unless you write custom Field subclasses;
if you do, you may need to reimplement the <tt class="docutils literal"><span class="pre">deconstruct()</span></tt> method if your
subclass changes the method signature of <tt class="docutils literal"><span class="pre">__init__</span></tt> in any way. If your
field just inherits from a built-in Django field and doesn&#8217;t override <tt class="docutils literal"><span class="pre">__init__</span></tt>,
no changes are necessary.</p>
<p>If you do need to override <tt class="docutils literal"><span class="pre">deconstruct()</span></tt>, a good place to start is the
built-in Django fields (<tt class="docutils literal"><span class="pre">django/db/models/fields/__init__.py</span></tt>) as several
fields, including <tt class="docutils literal"><span class="pre">DecimalField</span></tt> and <tt class="docutils literal"><span class="pre">DateField</span></tt>, override it and show how
to call the method on the superclass and simply add or remove extra arguments.</p>
<p>This also means that all arguments to fields must themselves be serializable;
to see what we consider serializable, and to find out how to make your own
classes serializable, read the
<a class="reference internal" href="../topics/migrations.html#migration-serializing"><em>migration serialization documentation</em></a>.</p>
</div>
<div class="section" id="s-calling-custom-queryset-methods-from-the-manager">
<span id="calling-custom-queryset-methods-from-the-manager"></span><h3>Calling custom <tt class="docutils literal"><span class="pre">QuerySet</span></tt> methods from the <tt class="docutils literal"><span class="pre">Manager</span></tt><a class="headerlink" href="#calling-custom-queryset-methods-from-the-manager" title="Permalink to this headline">¶</a></h3>
<p>Historically, the recommended way to make reusable model queries was to create
methods on a custom <tt class="docutils literal"><span class="pre">Manager</span></tt> class. The problem with this approach was that
after the first method call, you&#8217;d get back a <tt class="docutils literal"><span class="pre">QuerySet</span></tt> instance and
couldn&#8217;t call additional custom manager methods.</p>
<p>Though not documented, it was common to work around this issue by creating a
custom <tt class="docutils literal"><span class="pre">QuerySet</span></tt> so that custom methods could be chained; but the solution
had a number of drawbacks:</p>
<ul class="simple">
<li>The custom <tt class="docutils literal"><span class="pre">QuerySet</span></tt> and its custom methods were lost after the first
call to <tt class="docutils literal"><span class="pre">values()</span></tt> or <tt class="docutils literal"><span class="pre">values_list()</span></tt>.</li>
<li>Writing a custom <tt class="docutils literal"><span class="pre">Manager</span></tt> was still necessary to return the custom
<tt class="docutils literal"><span class="pre">QuerySet</span></tt> class and all methods that were desired on the <tt class="docutils literal"><span class="pre">Manager</span></tt>
had to be proxied to the <tt class="docutils literal"><span class="pre">QuerySet</span></tt>. The whole process went against
the DRY principle.</li>
</ul>
<p>The <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.as_manager" title="django.db.models.query.QuerySet.as_manager"><tt class="xref py py-meth docutils literal"><span class="pre">QuerySet.as_manager()</span></tt></a>
class method can now directly <a class="reference internal" href="../topics/db/managers.html#create-manager-with-queryset-methods"><em>create Manager with QuerySet methods</em></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">FoodQuerySet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">QuerySet</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">pizzas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">&#39;pizza&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">vegetarian</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">vegetarian</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Food</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">kind</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">vegetarian</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">FoodQuerySet</span><span class="o">.</span><span class="n">as_manager</span><span class="p">()</span>

<span class="n">Food</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">pizzas</span><span class="p">()</span><span class="o">.</span><span class="n">vegetarian</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="s-using-a-custom-manager-when-traversing-reverse-relations">
<span id="using-a-custom-manager-when-traversing-reverse-relations"></span><h3>Using a custom manager when traversing reverse relations<a class="headerlink" href="#using-a-custom-manager-when-traversing-reverse-relations" title="Permalink to this headline">¶</a></h3>
<p>It is now possible to <a class="reference internal" href="../topics/db/queries.html#using-custom-reverse-manager"><em>specify a custom manager</em></a> when traversing a reverse relationship:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">blog</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Blog</span><span class="p">)</span>

    <span class="n">objects</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span>  <span class="c"># Default Manager</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">EntryManager</span><span class="p">()</span>    <span class="c"># Custom Manager</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">Blog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">entry_set</span><span class="p">(</span><span class="n">manager</span><span class="o">=</span><span class="s">&#39;entries&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="s-new-system-check-framework">
<span id="new-system-check-framework"></span><h3>New system check framework<a class="headerlink" href="#new-system-check-framework" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ve added a new <a class="reference internal" href="../ref/checks.html"><em>System check framework</em></a> for
detecting common problems (like invalid models) and providing hints for
resolving those problems. The framework is extensible so you can add your
own checks for your own apps and libraries.</p>
<p>To perform system checks, you use the <a class="reference internal" href="../ref/django-admin.html#django-admin-check"><tt class="xref std std-djadmin docutils literal"><span class="pre">check</span></tt></a> management command.
This command replaces the older <a class="reference internal" href="../ref/django-admin.html#django-admin-validate"><tt class="xref std std-djadmin docutils literal"><span class="pre">validate</span></tt></a> management command.</p>
</div>
<div class="section" id="s-new-prefetch-object-for-advanced-prefetch-related-operations">
<span id="new-prefetch-object-for-advanced-prefetch-related-operations"></span><h3>New <tt class="docutils literal"><span class="pre">Prefetch</span></tt> object for advanced <tt class="docutils literal"><span class="pre">prefetch_related</span></tt> operations.<a class="headerlink" href="#new-prefetch-object-for-advanced-prefetch-related-operations" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../ref/models/querysets.html#django.db.models.Prefetch" title="django.db.models.Prefetch"><tt class="xref py py-class docutils literal"><span class="pre">Prefetch</span></tt></a> object allows customizing
prefetch operations.</p>
<p>You can specify the <tt class="docutils literal"><span class="pre">QuerySet</span></tt> used to traverse a given relation
or customize the storage location of prefetch results.</p>
<p>This enables things like filtering prefetched relations, calling
<a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.select_related" title="django.db.models.query.QuerySet.select_related"><tt class="xref py py-meth docutils literal"><span class="pre">select_related()</span></tt></a> from a prefetched
relation, or prefetching the same relation multiple times with different
querysets. See <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.prefetch_related" title="django.db.models.query.QuerySet.prefetch_related"><tt class="xref py py-meth docutils literal"><span class="pre">prefetch_related()</span></tt></a>
for more details.</p>
</div>
<div class="section" id="s-admin-shortcuts-support-time-zones">
<span id="admin-shortcuts-support-time-zones"></span><h3>Admin shortcuts support time zones<a class="headerlink" href="#admin-shortcuts-support-time-zones" title="Permalink to this headline">¶</a></h3>
<p>The &#8220;today&#8221; and &#8220;now&#8221; shortcuts next to date and time input widgets in the
admin are now operating in the <a class="reference internal" href="../topics/i18n/timezones.html#default-current-time-zone"><em>current time zone</em></a>. Previously, they used the browser time zone,
which could result in saving the wrong value when it didn&#8217;t match the current
time zone on the server.</p>
<p>In addition, the widgets now display a help message when the browser and
server time zone are different, to clarify how the value inserted in the field
will be interpreted.</p>
</div>
<div class="section" id="s-using-database-cursors-as-context-managers">
<span id="using-database-cursors-as-context-managers"></span><h3>Using database cursors as context managers<a class="headerlink" href="#using-database-cursors-as-context-managers" title="Permalink to this headline">¶</a></h3>
<p>Prior to Python 2.7, database cursors could be used as a context manager. The
specific backend&#8217;s cursor defined the behavior of the context manager. The
behavior of magic method lookups was changed with Python 2.7 and cursors were
no longer usable as context managers.</p>
<p>Django 1.7 allows a cursor to be used as a context manager. That is,
the following can be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>instead of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">c</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="s-custom-lookups">
<span id="custom-lookups"></span><h3>Custom lookups<a class="headerlink" href="#custom-lookups" title="Permalink to this headline">¶</a></h3>
<p>It is now possible to write custom lookups and transforms for the ORM.
Custom lookups work just like Django&#8217;s inbuilt lookups (e.g. <tt class="docutils literal"><span class="pre">lte</span></tt>,
<tt class="docutils literal"><span class="pre">icontains</span></tt>) while transforms are a new concept.</p>
<p>The <a class="reference internal" href="../ref/models/lookups.html#django.db.models.Lookup" title="django.db.models.Lookup"><tt class="xref py py-class docutils literal"><span class="pre">django.db.models.Lookup</span></tt></a> class provides a way to add lookup
operators for model fields. As an example it is possible to add <tt class="docutils literal"><span class="pre">day_lte</span></tt>
operator for <tt class="docutils literal"><span class="pre">DateFields</span></tt>.</p>
<p>The <a class="reference internal" href="../ref/models/lookups.html#django.db.models.Transform" title="django.db.models.Transform"><tt class="xref py py-class docutils literal"><span class="pre">django.db.models.Transform</span></tt></a> class allows transformations of
database values prior to the final lookup. For example it is possible to
write a <tt class="docutils literal"><span class="pre">year</span></tt> transform that extracts year from the field&#8217;s value.
Transforms allow for chaining. After the <tt class="docutils literal"><span class="pre">year</span></tt> transform has been added
to <tt class="docutils literal"><span class="pre">DateField</span></tt> it is possible to filter on the transformed value, for
example <tt class="docutils literal"><span class="pre">qs.filter(author__birthdate__year__lte=1981)</span></tt>.</p>
<p>For more information about both custom lookups and transforms refer to
the <a class="reference internal" href="../howto/custom-lookups.html"><em>custom lookups</em></a> documentation.</p>
</div>
<div class="section" id="s-improvements-to-form-error-handling">
<span id="improvements-to-form-error-handling"></span><h3>Improvements to <tt class="docutils literal"><span class="pre">Form</span></tt> error handling<a class="headerlink" href="#improvements-to-form-error-handling" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-form-add-error">
<span id="form-add-error"></span><h4><tt class="docutils literal"><span class="pre">Form.add_error()</span></tt><a class="headerlink" href="#form-add-error" title="Permalink to this headline">¶</a></h4>
<p>Previously there were two main patterns for handling errors in forms:</p>
<ul class="simple">
<li>Raising a <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.ValidationError" title="django.core.exceptions.ValidationError"><tt class="xref py py-exc docutils literal"><span class="pre">ValidationError</span></tt></a> from within certain
functions (e.g. <tt class="docutils literal"><span class="pre">Field.clean()</span></tt>, <tt class="docutils literal"><span class="pre">Form.clean_&lt;fieldname&gt;()</span></tt>, or
<tt class="docutils literal"><span class="pre">Form.clean()</span></tt> for non-field errors.)</li>
<li>Fiddling with <tt class="docutils literal"><span class="pre">Form._errors</span></tt> when targeting a specific field in
<tt class="docutils literal"><span class="pre">Form.clean()</span></tt> or adding errors from outside of a &#8220;clean&#8221; method
(e.g. directly from a view).</li>
</ul>
<p>Using the former pattern was straightforward since the form can guess from the
context (i.e. which method raised the exception) where the errors belong and
automatically process them. This remains the canonical way of adding errors
when possible. However the latter was fiddly and error-prone, since the burden
of handling edge cases fell on the user.</p>
<p>The new <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.add_error" title="django.forms.Form.add_error"><tt class="xref py py-meth docutils literal"><span class="pre">add_error()</span></tt></a> method allows adding errors
to specific form fields from anywhere without having to worry about the details
such as creating instances of <tt class="docutils literal"><span class="pre">django.forms.utils.ErrorList</span></tt> or dealing with
<tt class="docutils literal"><span class="pre">Form.cleaned_data</span></tt>. This new API replaces manipulating <tt class="docutils literal"><span class="pre">Form._errors</span></tt>
which now becomes a private API.</p>
<p>See <a class="reference internal" href="../ref/forms/validation.html#validating-fields-with-clean"><em>Cleaning and validating fields that depend on each other</em></a> for an example using
<tt class="docutils literal"><span class="pre">Form.add_error()</span></tt>.</p>
</div>
<div class="section" id="s-error-metadata">
<span id="error-metadata"></span><h4>Error metadata<a class="headerlink" href="#error-metadata" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.ValidationError" title="django.core.exceptions.ValidationError"><tt class="xref py py-exc docutils literal"><span class="pre">ValidationError</span></tt></a> constructor accepts metadata
such as error <tt class="docutils literal"><span class="pre">code</span></tt> or <tt class="docutils literal"><span class="pre">params</span></tt> which are then available for interpolating
into the error message (see <a class="reference internal" href="../ref/forms/validation.html#raising-validation-error"><em>Raising ValidationError</em></a> for more details);
however, before Django 1.7 those metadata were discarded as soon as the errors
were added to <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.errors" title="django.forms.Form.errors"><tt class="xref py py-attr docutils literal"><span class="pre">Form.errors</span></tt></a>.</p>
<p><a class="reference internal" href="../ref/forms/api.html#django.forms.Form.errors" title="django.forms.Form.errors"><tt class="xref py py-attr docutils literal"><span class="pre">Form.errors</span></tt></a> and
<tt class="docutils literal"><span class="pre">django.forms.utils.ErrorList</span></tt> now store the <tt class="docutils literal"><span class="pre">ValidationError</span></tt> instances
so these metadata can be retrieved at any time through the new
<a class="reference internal" href="../ref/forms/api.html#django.forms.Form.errors.as_data" title="django.forms.Form.errors.as_data"><tt class="xref py py-meth docutils literal"><span class="pre">Form.errors.as_data</span></tt></a> method.</p>
<p>The retrieved <tt class="docutils literal"><span class="pre">ValidationError</span></tt> instances can then be identified thanks to
their error <tt class="docutils literal"><span class="pre">code</span></tt> which enables things like rewriting the error&#8217;s message
or writing custom logic in a view when a given error is present. It can also
be used to serialize the errors in a custom format such as XML.</p>
<p>The new <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.errors.as_json" title="django.forms.Form.errors.as_json"><tt class="xref py py-meth docutils literal"><span class="pre">Form.errors.as_json()</span></tt></a>
method is a convenience method which returns error messages along with error
codes serialized as JSON. <tt class="docutils literal"><span class="pre">as_json()</span></tt> uses <tt class="docutils literal"><span class="pre">as_data()</span></tt> and gives an idea
of how the new system could be extended.</p>
</div>
<div class="section" id="s-error-containers-and-backward-compatibility">
<span id="error-containers-and-backward-compatibility"></span><h4>Error containers and backward compatibility<a class="headerlink" href="#error-containers-and-backward-compatibility" title="Permalink to this headline">¶</a></h4>
<p>Heavy changes to the various error containers were necessary in order
to support the features above, specifically
<a class="reference internal" href="../ref/forms/api.html#django.forms.Form.errors" title="django.forms.Form.errors"><tt class="xref py py-attr docutils literal"><span class="pre">Form.errors</span></tt></a>,
<tt class="docutils literal"><span class="pre">django.forms.utils.ErrorList</span></tt>, and the internal storages of
<a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.ValidationError" title="django.core.exceptions.ValidationError"><tt class="xref py py-exc docutils literal"><span class="pre">ValidationError</span></tt></a>. These containers which used
to store error strings now store <tt class="docutils literal"><span class="pre">ValidationError</span></tt> instances and public APIs
have been adapted to make this as transparent as possible, but if you&#8217;ve been
using private APIs, some of the changes are backwards incompatible; see
<a class="reference internal" href="#validation-error-constructor-and-internal-storage"><em>ValidationError constructor and internal storage</em></a> for more details.</p>
</div>
</div>
<div class="section" id="s-minor-features">
<span id="minor-features"></span><h3>Minor features<a class="headerlink" href="#minor-features" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admin</span></tt></a><a class="headerlink" href="#django-contrib-admin" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>You can now implement <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.site_header" title="django.contrib.admin.AdminSite.site_header"><tt class="xref py py-attr docutils literal"><span class="pre">site_header</span></tt></a>,
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.site_title" title="django.contrib.admin.AdminSite.site_title"><tt class="xref py py-attr docutils literal"><span class="pre">site_title</span></tt></a>, and
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite.index_title" title="django.contrib.admin.AdminSite.index_title"><tt class="xref py py-attr docutils literal"><span class="pre">index_title</span></tt></a> attributes on a custom
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><tt class="xref py py-class docutils literal"><span class="pre">AdminSite</span></tt></a> in order to easily change the admin
site&#8217;s page title and header text. No more needing to override templates!</li>
<li>Buttons in <a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admin</span></tt></a> now use the <tt class="docutils literal"><span class="pre">border-radius</span></tt> CSS
property for rounded corners rather than GIF background images.</li>
<li>Some admin templates now have <tt class="docutils literal"><span class="pre">app-&lt;app_name&gt;</span></tt> and <tt class="docutils literal"><span class="pre">model-&lt;model_name&gt;</span></tt>
classes in their <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> tag to allow customizing the CSS per app or per
model.</li>
<li>The admin changelist cells now have a <tt class="docutils literal"><span class="pre">field-&lt;field_name&gt;</span></tt> class in the
HTML to enable style customizations.</li>
<li>The admin&#8217;s search fields can now be customized per-request thanks to the new
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_search_fields" title="django.contrib.admin.ModelAdmin.get_search_fields"><tt class="xref py py-meth docutils literal"><span class="pre">django.contrib.admin.ModelAdmin.get_search_fields()</span></tt></a> method.</li>
<li>The <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_fields" title="django.contrib.admin.ModelAdmin.get_fields"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.get_fields()</span></tt></a> method may be overridden to
customize the value of <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.fields</span></tt></a>.</li>
<li>In addition to the existing <tt class="docutils literal"><span class="pre">admin.site.register</span></tt> syntax, you can use the
new <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.register" title="django.contrib.admin.register"><tt class="xref py py-func docutils literal"><span class="pre">register()</span></tt></a> decorator to register a
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a>.</li>
<li>You may specify <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.list_display_links" title="django.contrib.admin.ModelAdmin.list_display_links"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.list_display_links</span></tt></a> <tt class="docutils literal"><span class="pre">=</span> <span class="pre">None</span></tt> to disable
links on the change list page grid.</li>
<li>You may now specify <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.view_on_site" title="django.contrib.admin.ModelAdmin.view_on_site"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.view_on_site</span></tt></a> to control whether or not to
display the &#8220;View on site&#8221; link.</li>
<li>You can specify a descending ordering for a <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.list_display</span></tt></a> value by prefixing the
<tt class="docutils literal"><span class="pre">admin_order_field</span></tt> value with a hyphen.</li>
<li>The <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_changeform_initial_data" title="django.contrib.admin.ModelAdmin.get_changeform_initial_data"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.get_changeform_initial_data()</span></tt></a> method may be
overridden to define custom behavior for setting initial change form data.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.auth</span></tt></a><a class="headerlink" href="#django-contrib-auth" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Any <tt class="docutils literal"><span class="pre">**kwargs</span></tt> passed to
<a class="reference internal" href="../ref/contrib/auth.html#django.contrib.auth.models.User.email_user" title="django.contrib.auth.models.User.email_user"><tt class="xref py py-meth docutils literal"><span class="pre">email_user()</span></tt></a> are passed to the
underlying <a class="reference internal" href="../topics/email.html#django.core.mail.send_mail" title="django.core.mail.send_mail"><tt class="xref py py-meth docutils literal"><span class="pre">send_mail()</span></tt></a> call.</li>
<li>The <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.decorators.permission_required" title="django.contrib.auth.decorators.permission_required"><tt class="xref py py-func docutils literal"><span class="pre">permission_required()</span></tt></a> decorator can
take a list of permissions as well as a single permission.</li>
<li>You can override the new <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm.confirm_login_allowed" title="django.contrib.auth.forms.AuthenticationForm.confirm_login_allowed"><tt class="xref py py-meth docutils literal"><span class="pre">AuthenticationForm.confirm_login_allowed()</span></tt></a> method
to more easily customize the login policy.</li>
<li><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.password_reset" title="django.contrib.auth.views.password_reset"><tt class="xref py py-func docutils literal"><span class="pre">django.contrib.auth.views.password_reset()</span></tt></a> takes an optional
<tt class="docutils literal"><span class="pre">html_email_template_name</span></tt> parameter used to send a multipart HTML email
for password resets.</li>
<li>The <a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser.get_session_auth_hash" title="django.contrib.auth.models.AbstractBaseUser.get_session_auth_hash"><tt class="xref py py-meth docutils literal"><span class="pre">AbstractBaseUser.get_session_auth_hash()</span></tt></a>
method was added and if your <a class="reference internal" href="../ref/settings.html#std:setting-AUTH_USER_MODEL"><tt class="xref std std-setting docutils literal"><span class="pre">AUTH_USER_MODEL</span></tt></a> inherits from
<a class="reference internal" href="../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser" title="django.contrib.auth.models.AbstractBaseUser"><tt class="xref py py-class docutils literal"><span class="pre">AbstractBaseUser</span></tt></a>, changing a user&#8217;s
password now invalidates old sessions if the
<a class="reference internal" href="../ref/middleware.html#django.contrib.auth.middleware.SessionAuthenticationMiddleware" title="django.contrib.auth.middleware.SessionAuthenticationMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">SessionAuthenticationMiddleware</span></tt></a> is
enabled. See <a class="reference internal" href="../topics/auth/default.html#session-invalidation-on-password-change"><em>Session invalidation on password change</em></a> for more details
including upgrade considerations when enabling this new middleware.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-formtools">
<span id="django-contrib-formtools"></span><h4><tt class="docutils literal"><span class="pre">django.contrib.formtools</span></tt><a class="headerlink" href="#django-contrib-formtools" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Calls to <a class="reference external" href="http://django-formtools.readthedocs.org/en/latest/wizard.html#formtools.wizard.views.WizardView.done" title="(in django-formtools v1.0)"><tt class="xref py py-meth docutils literal"><span class="pre">WizardView.done()</span></tt></a> now include a
<tt class="docutils literal"><span class="pre">form_dict</span></tt> to allow easier access to forms by their step name.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.gis</span></tt></a><a class="headerlink" href="#django-contrib-gis" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The default OpenLayers library version included in widgets has been updated
from 2.11 to 2.13.</li>
<li>Prepared geometries now also support the <tt class="docutils literal"><span class="pre">crosses</span></tt>, <tt class="docutils literal"><span class="pre">disjoint</span></tt>,
<tt class="docutils literal"><span class="pre">overlaps</span></tt>, <tt class="docutils literal"><span class="pre">touches</span></tt> and <tt class="docutils literal"><span class="pre">within</span></tt> predicates, if GEOS 3.3 or later is
installed.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-messages">
<span id="django-contrib-messages"></span><h4><a class="reference internal" href="../ref/contrib/messages.html#module-django.contrib.messages" title="django.contrib.messages: Provides cookie- and session-based temporary message storage."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.messages</span></tt></a><a class="headerlink" href="#django-contrib-messages" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The backends for <a class="reference internal" href="../ref/contrib/messages.html#module-django.contrib.messages" title="django.contrib.messages: Provides cookie- and session-based temporary message storage."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.messages</span></tt></a> that use cookies, will now
follow the <a class="reference internal" href="../ref/settings.html#std:setting-SESSION_COOKIE_SECURE"><tt class="xref std std-setting docutils literal"><span class="pre">SESSION_COOKIE_SECURE</span></tt></a> and
<a class="reference internal" href="../ref/settings.html#std:setting-SESSION_COOKIE_HTTPONLY"><tt class="xref std std-setting docutils literal"><span class="pre">SESSION_COOKIE_HTTPONLY</span></tt></a> settings.</li>
<li>The <a class="reference internal" href="../ref/contrib/messages.html#message-displaying"><em>messages context processor</em></a> now adds a
dictionary of default levels under the name <tt class="docutils literal"><span class="pre">DEFAULT_MESSAGE_LEVELS</span></tt>.</li>
<li><a class="reference internal" href="../ref/contrib/messages.html#django.contrib.messages.storage.base.Message" title="django.contrib.messages.storage.base.Message"><tt class="xref py py-class docutils literal"><span class="pre">Message</span></tt></a> objects now have a
<tt class="docutils literal"><span class="pre">level_tag</span></tt> attribute that contains the string representation of the
message level.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-redirects">
<span id="django-contrib-redirects"></span><h4><a class="reference internal" href="../ref/contrib/redirects.html#module-django.contrib.redirects" title="django.contrib.redirects: A framework for managing redirects."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.redirects</span></tt></a><a class="headerlink" href="#django-contrib-redirects" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/redirects.html#django.contrib.redirects.middleware.RedirectFallbackMiddleware" title="django.contrib.redirects.middleware.RedirectFallbackMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">RedirectFallbackMiddleware</span></tt></a>
has two new attributes
(<a class="reference internal" href="../ref/contrib/redirects.html#django.contrib.redirects.middleware.RedirectFallbackMiddleware.response_gone_class" title="django.contrib.redirects.middleware.RedirectFallbackMiddleware.response_gone_class"><tt class="xref py py-attr docutils literal"><span class="pre">response_gone_class</span></tt></a>
and
<a class="reference internal" href="../ref/contrib/redirects.html#django.contrib.redirects.middleware.RedirectFallbackMiddleware.response_redirect_class" title="django.contrib.redirects.middleware.RedirectFallbackMiddleware.response_redirect_class"><tt class="xref py py-attr docutils literal"><span class="pre">response_redirect_class</span></tt></a>)
that specify the types of <a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> instances the
middleware returns.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sessions">
<span id="django-contrib-sessions"></span><h4><a class="reference internal" href="../topics/http/sessions.html#module-django.contrib.sessions" title="django.contrib.sessions: Provides session management for Django projects."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sessions</span></tt></a><a class="headerlink" href="#django-contrib-sessions" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">&quot;django.contrib.sessions.backends.cached_db&quot;</span></tt> session backend now
respects <a class="reference internal" href="../ref/settings.html#std:setting-SESSION_CACHE_ALIAS"><tt class="xref std std-setting docutils literal"><span class="pre">SESSION_CACHE_ALIAS</span></tt></a>. In previous versions, it always used
the <cite>default</cite> cache.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sitemaps">
<span id="django-contrib-sitemaps"></span><h4><a class="reference internal" href="../ref/contrib/sitemaps.html#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sitemaps</span></tt></a><a class="headerlink" href="#django-contrib-sitemaps" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/contrib/sitemaps.html#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><tt class="xref py py-mod docutils literal"><span class="pre">sitemap</span> <span class="pre">framework</span></tt></a> now makes use of
<a class="reference internal" href="../ref/contrib/sitemaps.html#django.contrib.sitemaps.Sitemap.lastmod" title="django.contrib.sitemaps.Sitemap.lastmod"><tt class="xref py py-attr docutils literal"><span class="pre">lastmod</span></tt></a> to set a <tt class="docutils literal"><span class="pre">Last-Modified</span></tt>
header in the response. This makes it possible for the
<a class="reference internal" href="../ref/middleware.html#django.middleware.http.ConditionalGetMiddleware" title="django.middleware.http.ConditionalGetMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">ConditionalGetMiddleware</span></tt></a> to handle
conditional <tt class="docutils literal"><span class="pre">GET</span></tt> requests for sitemaps which set <tt class="docutils literal"><span class="pre">lastmod</span></tt>.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-sites">
<span id="django-contrib-sites"></span><h4><a class="reference internal" href="../ref/contrib/sites.html#module-django.contrib.sites" title="django.contrib.sites: Lets you operate multiple Web sites from the same database and Django project"><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sites</span></tt></a><a class="headerlink" href="#django-contrib-sites" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The new <a class="reference internal" href="../ref/middleware.html#django.contrib.sites.middleware.CurrentSiteMiddleware" title="django.contrib.sites.middleware.CurrentSiteMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.sites.middleware.CurrentSiteMiddleware</span></tt></a> allows
setting the current site on each request.</li>
</ul>
</div>
<div class="section" id="s-django-contrib-staticfiles">
<span id="django-contrib-staticfiles"></span><h4><a class="reference internal" href="../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.staticfiles</span></tt></a><a class="headerlink" href="#django-contrib-staticfiles" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">The <a class="reference internal" href="../ref/contrib/staticfiles.html#staticfiles-storages"><em>static files storage classes</em></a> may be
subclassed to override the permissions that collected static files and
directories receive by setting the
<a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.FileSystemStorage.file_permissions_mode" title="django.core.files.storage.FileSystemStorage.file_permissions_mode"><tt class="xref py py-attr docutils literal"><span class="pre">file_permissions_mode</span></tt></a>
and <a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.FileSystemStorage.directory_permissions_mode" title="django.core.files.storage.FileSystemStorage.directory_permissions_mode"><tt class="xref py py-attr docutils literal"><span class="pre">directory_permissions_mode</span></tt></a>
parameters. See <a class="reference internal" href="../ref/contrib/staticfiles.html#django-admin-collectstatic"><tt class="xref std std-djadmin docutils literal"><span class="pre">collectstatic</span></tt></a> for example usage.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.CachedStaticFilesStorage" title="django.contrib.staticfiles.storage.CachedStaticFilesStorage"><tt class="xref py py-class docutils literal"><span class="pre">CachedStaticFilesStorage</span></tt></a>
backend gets a sibling class called
<a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><tt class="xref py py-class docutils literal"><span class="pre">ManifestStaticFilesStorage</span></tt></a>
that doesn&#8217;t use the cache system at all but instead a JSON file called
<tt class="docutils literal"><span class="pre">staticfiles.json</span></tt> for storing the mapping between the original file name
(e.g. <tt class="docutils literal"><span class="pre">css/styles.css</span></tt>) and the hashed file name (e.g.
<tt class="docutils literal"><span class="pre">css/styles.55e7cbb9ba48.css</span></tt>). The <tt class="docutils literal"><span class="pre">staticfiles.json</span></tt> file is created
when running the <a class="reference internal" href="../ref/contrib/staticfiles.html#django-admin-collectstatic"><tt class="xref std std-djadmin docutils literal"><span class="pre">collectstatic</span></tt></a> management command and should
be a less expensive alternative for remote storages such as Amazon S3.</p>
<p>See the <a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><tt class="xref py py-class docutils literal"><span class="pre">ManifestStaticFilesStorage</span></tt></a>
docs for more information.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/contrib/staticfiles.html#django-admin-findstatic"><tt class="xref std std-djadmin docutils literal"><span class="pre">findstatic</span></tt></a> now accepts verbosity flag level 2, meaning it will
show the relative paths of the directories it searched. See
<a class="reference internal" href="../ref/contrib/staticfiles.html#django-admin-findstatic"><tt class="xref std std-djadmin docutils literal"><span class="pre">findstatic</span></tt></a> for example output.</p>
</li>
</ul>
</div>
<div class="section" id="s-django-contrib-syndication">
<span id="django-contrib-syndication"></span><h4><a class="reference internal" href="../ref/contrib/syndication.html#module-django.contrib.syndication" title="django.contrib.syndication: A framework for generating syndication feeds, in RSS and Atom, quite easily."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.syndication</span></tt></a><a class="headerlink" href="#django-contrib-syndication" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/utils.html#django.utils.feedgenerator.Atom1Feed" title="django.utils.feedgenerator.Atom1Feed"><tt class="xref py py-class docutils literal"><span class="pre">Atom1Feed</span></tt></a> syndication feed&#8217;s
<tt class="docutils literal"><span class="pre">updated</span></tt> element now utilizes <tt class="docutils literal"><span class="pre">updateddate</span></tt> instead of <tt class="docutils literal"><span class="pre">pubdate</span></tt>,
allowing the <tt class="docutils literal"><span class="pre">published</span></tt> element to be included in the feed (which
relies on <tt class="docutils literal"><span class="pre">pubdate</span></tt>).</li>
</ul>
</div>
<div class="section" id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Access to caches configured in <a class="reference internal" href="../ref/settings.html#std:setting-CACHES"><tt class="xref std std-setting docutils literal"><span class="pre">CACHES</span></tt></a> is now available via
<a class="reference internal" href="../topics/cache.html#django.core.cache.caches" title="django.core.cache.caches"><tt class="xref py py-data docutils literal"><span class="pre">django.core.cache.caches</span></tt></a>. This dict-like object provides a different
instance per thread. It supersedes <a class="reference internal" href="../topics/cache.html#django.core.cache.get_cache" title="django.core.cache.get_cache"><tt class="xref py py-func docutils literal"><span class="pre">django.core.cache.get_cache()</span></tt></a> which
is now deprecated.</li>
<li>If you instantiate cache backends directly, be aware that they aren&#8217;t
thread-safe any more, as <a class="reference internal" href="../topics/cache.html#django.core.cache.caches" title="django.core.cache.caches"><tt class="xref py py-data docutils literal"><span class="pre">django.core.cache.caches</span></tt></a> now yields
different instances per thread.</li>
<li>Defining the <a class="reference internal" href="../ref/settings.html#std:setting-CACHES-TIMEOUT"><tt class="xref std std-setting docutils literal"><span class="pre">TIMEOUT</span></tt></a> argument of the
<a class="reference internal" href="../ref/settings.html#std:setting-CACHES"><tt class="xref std std-setting docutils literal"><span class="pre">CACHES</span></tt></a> setting as <tt class="docutils literal"><span class="pre">None</span></tt> will set the cache keys as
&#8220;non-expiring&#8221; by default. Previously, it was only possible to pass
<tt class="docutils literal"><span class="pre">timeout=None</span></tt> to the cache backend&#8217;s <tt class="docutils literal"><span class="pre">set()</span></tt> method.</li>
</ul>
</div>
<div class="section" id="s-cross-site-request-forgery">
<span id="cross-site-request-forgery"></span><h4>Cross Site Request Forgery<a class="headerlink" href="#cross-site-request-forgery" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/settings.html#std:setting-CSRF_COOKIE_AGE"><tt class="xref std std-setting docutils literal"><span class="pre">CSRF_COOKIE_AGE</span></tt></a> setting facilitates the use of session-based
CSRF cookies.</li>
</ul>
</div>
<div class="section" id="s-email">
<span id="email"></span><h4>Email<a class="headerlink" href="#email" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/email.html#django.core.mail.send_mail" title="django.core.mail.send_mail"><tt class="xref py py-func docutils literal"><span class="pre">send_mail()</span></tt></a> now accepts an <tt class="docutils literal"><span class="pre">html_message</span></tt>
parameter for sending a multipart <tt class="docutils literal"><span class="pre">text/plain</span></tt> and <tt class="docutils literal"><span class="pre">text/html</span></tt> email.</li>
<li>The SMTP <a class="reference internal" href="../topics/email.html#django.core.mail.backends.smtp.EmailBackend" title="django.core.mail.backends.smtp.EmailBackend"><tt class="xref py py-class docutils literal"><span class="pre">EmailBackend</span></tt></a> now accepts a
<tt class="docutils literal"><span class="pre">timeout</span></tt> parameter.</li>
</ul>
</div>
<div class="section" id="s-file-storage">
<span id="file-storage"></span><h4>File Storage<a class="headerlink" href="#file-storage" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>File locking on Windows previously depended on the PyWin32 package; if it
wasn&#8217;t installed, file locking failed silently. That dependency has been
removed, and file locking is now implemented natively on both Windows
and Unix.</li>
</ul>
</div>
<div class="section" id="s-file-uploads">
<span id="file-uploads"></span><h4>File Uploads<a class="headerlink" href="#file-uploads" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The new <a class="reference internal" href="../ref/files/uploads.html#django.core.files.uploadedfile.UploadedFile.content_type_extra" title="django.core.files.uploadedfile.UploadedFile.content_type_extra"><tt class="xref py py-attr docutils literal"><span class="pre">UploadedFile.content_type_extra</span></tt></a> attribute
contains extra parameters passed to the <tt class="docutils literal"><span class="pre">content-type</span></tt> header on a file
upload.</li>
<li>The new <a class="reference internal" href="../ref/settings.html#std:setting-FILE_UPLOAD_DIRECTORY_PERMISSIONS"><tt class="xref std std-setting docutils literal"><span class="pre">FILE_UPLOAD_DIRECTORY_PERMISSIONS</span></tt></a> setting controls
the file system permissions of directories created during file upload, like
<a class="reference internal" href="../ref/settings.html#std:setting-FILE_UPLOAD_PERMISSIONS"><tt class="xref std std-setting docutils literal"><span class="pre">FILE_UPLOAD_PERMISSIONS</span></tt></a> does for the files themselves.</li>
<li>The <a class="reference internal" href="../ref/models/fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><tt class="xref py py-attr docutils literal"><span class="pre">FileField.upload_to</span></tt></a>
attribute is now optional. If it is omitted or given <tt class="docutils literal"><span class="pre">None</span></tt> or an empty
string, a subdirectory won&#8217;t be used for storing the uploaded files.</li>
<li>Uploaded files are now explicitly closed before the response is delivered to
the client. Partially uploaded files are also closed as long as they are
named <tt class="docutils literal"><span class="pre">file</span></tt> in the upload handler.</li>
<li><a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.Storage.get_available_name" title="django.core.files.storage.Storage.get_available_name"><tt class="xref py py-meth docutils literal"><span class="pre">Storage.get_available_name()</span></tt></a> now appends an
underscore plus a random 7 character alphanumeric string (e.g.
<tt class="docutils literal"><span class="pre">&quot;_x3a1gho&quot;</span></tt>), rather than iterating through an underscore followed by a
number (e.g. <tt class="docutils literal"><span class="pre">&quot;_1&quot;</span></tt>, <tt class="docutils literal"><span class="pre">&quot;_2&quot;</span></tt>, etc.) to prevent a denial-of-service attack.
This change was also made in the 1.6.6, 1.5.9, and 1.4.14 security releases.</li>
</ul>
</div>
<div class="section" id="s-forms">
<span id="forms"></span><h4>Forms<a class="headerlink" href="#forms" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> and <tt class="docutils literal"><span class="pre">&lt;input&gt;</span></tt> tags rendered by
<a class="reference internal" href="../ref/forms/widgets.html#django.forms.RadioSelect" title="django.forms.RadioSelect"><tt class="xref py py-class docutils literal"><span class="pre">RadioSelect</span></tt></a> and
<a class="reference internal" href="../ref/forms/widgets.html#django.forms.CheckboxSelectMultiple" title="django.forms.CheckboxSelectMultiple"><tt class="xref py py-class docutils literal"><span class="pre">CheckboxSelectMultiple</span></tt></a> when looping over the radio
buttons or checkboxes now include <tt class="docutils literal"><span class="pre">for</span></tt> and <tt class="docutils literal"><span class="pre">id</span></tt> attributes, respectively.
Each radio button or checkbox includes an <tt class="docutils literal"><span class="pre">id_for_label</span></tt> attribute to
output the element&#8217;s ID.</li>
<li>The <tt class="docutils literal"><span class="pre">&lt;textarea&gt;</span></tt> tags rendered by <a class="reference internal" href="../ref/forms/widgets.html#django.forms.Textarea" title="django.forms.Textarea"><tt class="xref py py-class docutils literal"><span class="pre">Textarea</span></tt></a> now
include a <tt class="docutils literal"><span class="pre">maxlength</span></tt> attribute if the <a class="reference internal" href="../ref/models/fields.html#django.db.models.TextField" title="django.db.models.TextField"><tt class="xref py py-class docutils literal"><span class="pre">TextField</span></tt></a>
model field has a <tt class="docutils literal"><span class="pre">max_length</span></tt>.</li>
<li><a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><tt class="xref py py-attr docutils literal"><span class="pre">Field.choices</span></tt></a> now allows you to
customize the &#8220;empty choice&#8221; label by including a tuple with an empty string
or <tt class="docutils literal"><span class="pre">None</span></tt> for the key and the custom label as the value. The default blank
option <tt class="docutils literal"><span class="pre">&quot;----------&quot;</span></tt> will be omitted in this case.</li>
<li><a class="reference internal" href="../ref/forms/fields.html#django.forms.MultiValueField" title="django.forms.MultiValueField"><tt class="xref py py-class docutils literal"><span class="pre">MultiValueField</span></tt></a> allows optional subfields by setting
the <tt class="docutils literal"><span class="pre">require_all_fields</span></tt> argument to <tt class="docutils literal"><span class="pre">False</span></tt>. The <tt class="docutils literal"><span class="pre">required</span></tt> attribute
for each individual field will be respected, and a new <tt class="docutils literal"><span class="pre">incomplete</span></tt>
validation error will be raised when any required fields are empty.</li>
<li>The <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.clean" title="django.forms.Form.clean"><tt class="xref py py-meth docutils literal"><span class="pre">clean()</span></tt></a> method on a form no longer needs to
return <tt class="docutils literal"><span class="pre">self.cleaned_data</span></tt>. If it does return a changed dictionary then
that will still be used.</li>
<li>After a temporary regression in Django 1.6, it&#8217;s now possible again to make
<a class="reference internal" href="../ref/forms/fields.html#django.forms.TypedChoiceField" title="django.forms.TypedChoiceField"><tt class="xref py py-class docutils literal"><span class="pre">TypedChoiceField</span></tt></a> <tt class="docutils literal"><span class="pre">coerce</span></tt> method return an arbitrary
value.</li>
<li><a class="reference internal" href="../ref/forms/widgets.html#django.forms.extras.widgets.SelectDateWidget.months" title="django.forms.extras.widgets.SelectDateWidget.months"><tt class="xref py py-attr docutils literal"><span class="pre">SelectDateWidget.months</span></tt></a> can be used to
customize the wording of the months displayed in the select widget.</li>
<li>The <tt class="docutils literal"><span class="pre">min_num</span></tt> and <tt class="docutils literal"><span class="pre">validate_min</span></tt> parameters were added to
<a class="reference internal" href="../ref/forms/formsets.html#django.forms.formsets.formset_factory" title="django.forms.formsets.formset_factory"><tt class="xref py py-func docutils literal"><span class="pre">formset_factory()</span></tt></a> to allow validating
a minimum number of submitted forms.</li>
<li>The metaclasses used by <tt class="docutils literal"><span class="pre">Form</span></tt> and <tt class="docutils literal"><span class="pre">ModelForm</span></tt> have been reworked to
support more inheritance scenarios. The previous limitation that prevented
inheriting from both <tt class="docutils literal"><span class="pre">Form</span></tt> and <tt class="docutils literal"><span class="pre">ModelForm</span></tt> simultaneously have been
removed as long as <tt class="docutils literal"><span class="pre">ModelForm</span></tt> appears first in the MRO.</li>
<li>It&#8217;s now possible to remove a field from a <tt class="docutils literal"><span class="pre">Form</span></tt> when subclassing by
setting the name to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li>It&#8217;s now possible to customize the error messages for <tt class="docutils literal"><span class="pre">ModelForm</span></tt>’s
<tt class="docutils literal"><span class="pre">unique</span></tt>, <tt class="docutils literal"><span class="pre">unique_for_date</span></tt>, and <tt class="docutils literal"><span class="pre">unique_together</span></tt> constraints.
In order to support <tt class="docutils literal"><span class="pre">unique_together</span></tt> or any other <tt class="docutils literal"><span class="pre">NON_FIELD_ERROR</span></tt>,
<tt class="docutils literal"><span class="pre">ModelForm</span></tt> now looks for the <tt class="docutils literal"><span class="pre">NON_FIELD_ERROR</span></tt> key in the
<tt class="docutils literal"><span class="pre">error_messages</span></tt> dictionary of the <tt class="docutils literal"><span class="pre">ModelForm</span></tt>’s inner <tt class="docutils literal"><span class="pre">Meta</span></tt> class.
See <a class="reference internal" href="../topics/forms/modelforms.html#considerations-regarding-model-errormessages"><em>considerations regarding model&#8217;s error_messages</em></a> for more details.</li>
</ul>
</div>
<div class="section" id="s-internationalization">
<span id="internationalization"></span><h4>Internationalization<a class="headerlink" href="#internationalization" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/middleware.html#django.middleware.locale.LocaleMiddleware.response_redirect_class" title="django.middleware.locale.LocaleMiddleware.response_redirect_class"><tt class="xref py py-attr docutils literal"><span class="pre">django.middleware.locale.LocaleMiddleware.response_redirect_class</span></tt></a>
attribute allows you to customize the redirects issued by the middleware.</li>
<li>The <a class="reference internal" href="../ref/middleware.html#django.middleware.locale.LocaleMiddleware" title="django.middleware.locale.LocaleMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">LocaleMiddleware</span></tt></a> now stores the user&#8217;s
selected language with the session key <tt class="docutils literal"><span class="pre">_language</span></tt>. This should only be
accessed using the <a class="reference internal" href="../ref/utils.html#django.utils.translation.LANGUAGE_SESSION_KEY" title="django.utils.translation.LANGUAGE_SESSION_KEY"><tt class="xref py py-data docutils literal"><span class="pre">LANGUAGE_SESSION_KEY</span></tt></a>
constant. Previously it was stored with the key <tt class="docutils literal"><span class="pre">django_language</span></tt> and the
<tt class="docutils literal"><span class="pre">LANGUAGE_SESSION_KEY</span></tt> constant did not exist, but keys reserved for Django
should start with an underscore. For backwards compatibility <tt class="docutils literal"><span class="pre">django_language</span></tt>
is still read from in 1.7. Sessions will be migrated to the new key
as they are written.</li>
<li>The <a class="reference internal" href="../topics/i18n/translation.html#std:templatetag-blocktrans"><tt class="xref std std-ttag docutils literal"><span class="pre">blocktrans</span></tt></a> tag now supports a <tt class="docutils literal"><span class="pre">trimmed</span></tt> option. This
option will remove newline characters from the beginning and the end of the
content of the <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">blocktrans</span> <span class="pre">%}</span></tt> tag, replace any whitespace at the
beginning and end of a line and merge all lines into one using a space
character to separate them. This is quite useful for indenting the content of
a <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">blocktrans</span> <span class="pre">%}</span></tt> tag without having the indentation characters end up
in the corresponding entry in the PO file, which makes the translation
process easier.</li>
<li>When you run <a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><tt class="xref std std-djadmin docutils literal"><span class="pre">makemessages</span></tt></a> from the root directory of your project,
any extracted strings will now be automatically distributed to the proper
app or project message file. See <a class="reference internal" href="../topics/i18n/translation.html#how-to-create-language-files"><em>Localization: how to create language files</em></a> for
details.</li>
<li>The <a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><tt class="xref std std-djadmin docutils literal"><span class="pre">makemessages</span></tt></a> command now always adds the <tt class="docutils literal"><span class="pre">--previous</span></tt>
command line flag to the <tt class="docutils literal"><span class="pre">msgmerge</span></tt> command, keeping previously translated
strings in po files for fuzzy strings.</li>
<li>The following settings to adjust the language cookie options were introduced:
<a class="reference internal" href="../ref/settings.html#std:setting-LANGUAGE_COOKIE_AGE"><tt class="xref std std-setting docutils literal"><span class="pre">LANGUAGE_COOKIE_AGE</span></tt></a>, <a class="reference internal" href="../ref/settings.html#std:setting-LANGUAGE_COOKIE_DOMAIN"><tt class="xref std std-setting docutils literal"><span class="pre">LANGUAGE_COOKIE_DOMAIN</span></tt></a>
and <a class="reference internal" href="../ref/settings.html#std:setting-LANGUAGE_COOKIE_PATH"><tt class="xref std std-setting docutils literal"><span class="pre">LANGUAGE_COOKIE_PATH</span></tt></a>.</li>
<li>Added <a class="reference internal" href="../topics/i18n/formatting.html#format-localization"><em>format definitions</em></a> for Esperanto.</li>
</ul>
</div>
<div class="section" id="s-management-commands">
<span id="management-commands"></span><h4>Management Commands<a class="headerlink" href="#management-commands" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">The <a class="reference internal" href="../ref/django-admin.html#django-admin-option---no-color"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--no-color</span></tt></a> option for <tt class="docutils literal"><span class="pre">django-admin</span></tt> allows you to
disable the colorization of management command output.</p>
</li>
<li><p class="first">The new <a class="reference internal" href="../ref/django-admin.html#django-admin-option---natural-foreign"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--natural-foreign</span></tt></a> and <a class="reference internal" href="../ref/django-admin.html#django-admin-option---natural-primary"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--natural-primary</span></tt></a>
options for <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><tt class="xref std std-djadmin docutils literal"><span class="pre">dumpdata</span></tt></a>, and the new <tt class="docutils literal"><span class="pre">use_natural_foreign_keys</span></tt> and
<tt class="docutils literal"><span class="pre">use_natural_primary_keys</span></tt> arguments for <tt class="docutils literal"><span class="pre">serializers.serialize()</span></tt>, allow
the use of natural primary keys when serializing.</p>
</li>
<li><p class="first">It is no longer necessary to provide the cache table name or the
<a class="reference internal" href="../ref/django-admin.html#django-admin-option---database"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--database</span></tt></a> option for the <a class="reference internal" href="../ref/django-admin.html#django-admin-createcachetable"><tt class="xref std std-djadmin docutils literal"><span class="pre">createcachetable</span></tt></a> command.
Django takes this information from your settings file. If you have configured
multiple caches or multiple databases, all cache tables are created.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../ref/django-admin.html#django-admin-runserver"><tt class="xref std std-djadmin docutils literal"><span class="pre">runserver</span></tt></a> command received several improvements:</p>
<ul class="simple">
<li>On Linux systems, if <a class="reference external" href="https://pypi.python.org/pypi/pyinotify">pyinotify</a> is installed, the development server will
reload immediately when a file is changed. Previously, it polled the
filesystem for changes every second. That caused a small delay before
reloads and reduced battery life on laptops.</li>
<li>In addition, the development server automatically reloads when a
translation file is updated, i.e. after running
<a class="reference internal" href="../ref/django-admin.html#django-admin-compilemessages"><tt class="xref std std-djadmin docutils literal"><span class="pre">compilemessages</span></tt></a>.</li>
<li>All HTTP requests are logged to the console, including requests for static
files or <tt class="docutils literal"><span class="pre">favicon.ico</span></tt> that used to be filtered out.</li>
</ul>
</li>
<li><p class="first">Management commands can now produce syntax colored output under Windows if
the ANSICON third-party tool is installed and active.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/contrib/staticfiles.html#django-admin-collectstatic"><tt class="xref std std-djadmin docutils literal"><span class="pre">collectstatic</span></tt></a> command with symlink option is now supported on
Windows NT 6 (Windows Vista and newer).</p>
</li>
<li><p class="first"><a class="reference internal" href="../howto/initial-data.html#initial-sql"><em>Providing initial SQL data</em></a> now works better if the <a class="reference external" href="https://pypi.python.org/pypi/sqlparse">sqlparse</a> Python library is
installed.</p>
<p>Note that it&#8217;s deprecated in favor of the
<a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RunSQL" title="django.db.migrations.operations.RunSQL"><tt class="xref py py-class docutils literal"><span class="pre">RunSQL</span></tt></a> operation of migrations,
which benefits from the improved behavior.</p>
</li>
</ul>
</div>
<div class="section" id="s-models">
<span id="models"></span><h4>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.update_or_create" title="django.db.models.query.QuerySet.update_or_create"><tt class="xref py py-meth docutils literal"><span class="pre">QuerySet.update_or_create()</span></tt></a> method was added.</li>
<li>The new <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.default_permissions" title="django.db.models.Options.default_permissions"><tt class="xref py py-attr docutils literal"><span class="pre">default_permissions</span></tt></a> model
<tt class="docutils literal"><span class="pre">Meta</span></tt> option allows you to customize (or disable) creation of the default
add, change, and delete permissions.</li>
<li>Explicit <a class="reference internal" href="../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><tt class="xref py py-class docutils literal"><span class="pre">OneToOneField</span></tt></a> for
<a class="reference internal" href="../topics/db/models.html#multi-table-inheritance"><em>Multi-table inheritance</em></a> are now discovered in abstract classes.</li>
<li>It is now possible to avoid creating a backward relation for
<a class="reference internal" href="../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><tt class="xref py py-class docutils literal"><span class="pre">OneToOneField</span></tt></a> by setting its
<a class="reference internal" href="../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><tt class="xref py py-attr docutils literal"><span class="pre">related_name</span></tt></a> to
<tt class="docutils literal"><span class="pre">'+'</span></tt> or ending it with <tt class="docutils literal"><span class="pre">'+'</span></tt>.</li>
<li><a class="reference internal" href="../ref/models/expressions.html#django.db.models.F" title="django.db.models.F"><tt class="xref py py-class docutils literal"><span class="pre">F</span> <span class="pre">expressions</span></tt></a> support the power operator
(<tt class="docutils literal"><span class="pre">**</span></tt>).</li>
<li>The <tt class="docutils literal"><span class="pre">remove()</span></tt> and <tt class="docutils literal"><span class="pre">clear()</span></tt> methods of the related managers created by
<tt class="docutils literal"><span class="pre">ForeignKey</span></tt> and <tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt> now accept the <tt class="docutils literal"><span class="pre">bulk</span></tt> keyword
argument to control whether or not to perform operations in bulk
(i.e. using <tt class="docutils literal"><span class="pre">QuerySet.update()</span></tt>). Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
<li>It is now possible to use <tt class="docutils literal"><span class="pre">None</span></tt> as a query value for the <a class="reference internal" href="../ref/models/querysets.html#std:fieldlookup-iexact"><tt class="xref std std-lookup docutils literal"><span class="pre">iexact</span></tt></a>
lookup.</li>
<li>It is now possible to pass a callable as value for the attribute
<a class="reference internal" href="../ref/models/fields.html#django.db.models.ForeignKey.limit_choices_to" title="django.db.models.ForeignKey.limit_choices_to"><tt class="xref py py-attr docutils literal"><span class="pre">limit_choices_to</span></tt></a> when defining a
<tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>.</li>
<li>Calling <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.only" title="django.db.models.query.QuerySet.only"><tt class="xref py py-meth docutils literal"><span class="pre">only()</span></tt></a> and
<a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.defer" title="django.db.models.query.QuerySet.defer"><tt class="xref py py-meth docutils literal"><span class="pre">defer()</span></tt></a> on the result of
<a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.values" title="django.db.models.query.QuerySet.values"><tt class="xref py py-meth docutils literal"><span class="pre">QuerySet.values()</span></tt></a> now raises
an error (before that, it would either result in a database error or
incorrect data).</li>
<li>You can use a single list for <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.index_together" title="django.db.models.Options.index_together"><tt class="xref py py-attr docutils literal"><span class="pre">index_together</span></tt></a>
(rather than a list of lists) when specifying a single set of fields.</li>
<li>Custom intermediate models having more than one foreign key to any of the
models participating in a many-to-many relationship are now permitted,
provided you explicitly specify which foreign keys should be used by setting
the new <a class="reference internal" href="../ref/models/fields.html#django.db.models.ManyToManyField.through_fields" title="django.db.models.ManyToManyField.through_fields"><tt class="xref py py-attr docutils literal"><span class="pre">ManyToManyField.through_fields</span></tt></a>
argument.</li>
<li>Assigning a model instance to a non-relation field will now throw an error.
Previously this used to work if the field accepted integers as input as it
took the primary key.</li>
<li>Integer fields are now validated against database backend specific min and
max values based on their <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.get_internal_type" title="django.db.models.Field.get_internal_type"><tt class="xref py py-meth docutils literal"><span class="pre">internal_type</span></tt></a>.
Previously model field validation didn&#8217;t prevent values out of their associated
column data type range from being saved resulting in an integrity error.</li>
<li>It is now possible to explicitly <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.order_by" title="django.db.models.query.QuerySet.order_by"><tt class="xref py py-meth docutils literal"><span class="pre">order_by()</span></tt></a>
a relation <tt class="docutils literal"><span class="pre">_id</span></tt> field by using its attribute name.</li>
</ul>
</div>
<div class="section" id="s-signals">
<span id="signals"></span><h4>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">enter</span></tt> argument was added to the
<a class="reference internal" href="../ref/signals.html#django.test.signals.setting_changed" title="django.test.signals.setting_changed"><tt class="xref py py-data docutils literal"><span class="pre">setting_changed</span></tt></a> signal.</li>
<li>The model signals can be now be connected to using a <tt class="docutils literal"><span class="pre">str</span></tt> of the
<tt class="docutils literal"><span class="pre">'app_label.ModelName'</span></tt> form – just like related fields – to lazily
reference their senders.</li>
</ul>
</div>
<div class="section" id="s-templates">
<span id="templates"></span><h4>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The <a class="reference internal" href="../ref/templates/api.html#django.template.Context.push" title="django.template.Context.push"><tt class="xref py py-meth docutils literal"><span class="pre">Context.push()</span></tt></a> method now returns
a context manager which automatically calls <a class="reference internal" href="../ref/templates/api.html#django.template.Context.pop" title="django.template.Context.pop"><tt class="xref py py-meth docutils literal"><span class="pre">pop()</span></tt></a> upon exiting the <tt class="docutils literal"><span class="pre">with</span></tt> statement.
Additionally, <a class="reference internal" href="../ref/templates/api.html#django.template.Context.push" title="django.template.Context.push"><tt class="xref py py-meth docutils literal"><span class="pre">push()</span></tt></a> now accepts
parameters that are passed to the <tt class="docutils literal"><span class="pre">dict</span></tt> constructor used to build the new
context level.</li>
<li>The new <a class="reference internal" href="../ref/templates/api.html#django.template.Context.flatten" title="django.template.Context.flatten"><tt class="xref py py-meth docutils literal"><span class="pre">Context.flatten()</span></tt></a> method
returns a <tt class="docutils literal"><span class="pre">Context</span></tt>&#8216;s stack as one flat dictionary.</li>
<li><tt class="docutils literal"><span class="pre">Context</span></tt> objects can now be compared for equality (internally, this
uses <a class="reference internal" href="../ref/templates/api.html#django.template.Context.flatten" title="django.template.Context.flatten"><tt class="xref py py-meth docutils literal"><span class="pre">Context.flatten()</span></tt></a> so the
internal structure of each <tt class="docutils literal"><span class="pre">Context</span></tt>&#8216;s stack doesn&#8217;t matter as long as their
flattened version is identical).</li>
<li>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-widthratio"><tt class="xref std std-ttag docutils literal"><span class="pre">widthratio</span></tt></a> template tag now accepts an <tt class="docutils literal"><span class="pre">&quot;as&quot;</span></tt> parameter to
capture the result in a variable.</li>
<li>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-include"><tt class="xref std std-ttag docutils literal"><span class="pre">include</span></tt></a> template tag will now also accept anything with a
<tt class="docutils literal"><span class="pre">render()</span></tt> method (such as a <tt class="docutils literal"><span class="pre">Template</span></tt>) as an argument. String
arguments will be looked up using
<a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><tt class="xref py py-func docutils literal"><span class="pre">get_template()</span></tt></a> as always.</li>
<li>It is now possible to <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-include"><tt class="xref std std-ttag docutils literal"><span class="pre">include</span></tt></a> templates recursively.</li>
<li>Template objects now have an origin attribute set when
<tt class="docutils literal"><span class="pre">TEMPLATE_DEBUG</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt>. This allows template origins to be
inspected and logged outside of the <tt class="docutils literal"><span class="pre">django.template</span></tt> infrastructure.</li>
<li><tt class="docutils literal"><span class="pre">TypeError</span></tt> exceptions are no longer silenced when raised during the
rendering of a template.</li>
<li>The following functions now accept a <tt class="docutils literal"><span class="pre">dirs</span></tt> parameter which is a list or
tuple to override <tt class="docutils literal"><span class="pre">TEMPLATE_DIRS</span></tt>:<ul>
<li><a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><tt class="xref py py-func docutils literal"><span class="pre">django.template.loader.get_template()</span></tt></a></li>
<li><a class="reference internal" href="../topics/templates.html#django.template.loader.select_template" title="django.template.loader.select_template"><tt class="xref py py-func docutils literal"><span class="pre">django.template.loader.select_template()</span></tt></a></li>
<li><a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.render" title="django.shortcuts.render"><tt class="xref py py-func docutils literal"><span class="pre">django.shortcuts.render()</span></tt></a></li>
<li><a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.render_to_response" title="django.shortcuts.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">django.shortcuts.render_to_response()</span></tt></a></li>
</ul>
</li>
<li>The <a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-time"><tt class="xref std std-tfilter docutils literal"><span class="pre">time</span></tt></a> filter now accepts timezone-related <a class="reference internal" href="../ref/templates/builtins.html#date-and-time-formatting-specifiers"><em>format
specifiers</em></a> <tt class="docutils literal"><span class="pre">'e'</span></tt>, <tt class="docutils literal"><span class="pre">'O'</span></tt> , <tt class="docutils literal"><span class="pre">'T'</span></tt>
and <tt class="docutils literal"><span class="pre">'Z'</span></tt> and is able to digest <a class="reference internal" href="../topics/i18n/timezones.html#naive-vs-aware-datetimes"><em>time-zone-aware</em></a> <tt class="docutils literal"><span class="pre">datetime</span></tt> instances performing the expected
rendering.</li>
<li>The <a class="reference internal" href="../topics/cache.html#std:templatetag-cache"><tt class="xref std std-ttag docutils literal"><span class="pre">cache</span></tt></a> tag will now try to use the cache called
&#8220;template_fragments&#8221; if it exists and fall back to using the default cache
otherwise. It also now accepts an optional <tt class="docutils literal"><span class="pre">using</span></tt> keyword argument to
control which cache it uses.</li>
<li>The new <a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-truncatechars_html"><tt class="xref std std-tfilter docutils literal"><span class="pre">truncatechars_html</span></tt></a> filter truncates a string to be no
longer than the specified number of characters, taking HTML into account.</li>
</ul>
</div>
<div class="section" id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requests and Responses<a class="headerlink" href="#requests-and-responses" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The new <a class="reference internal" href="../ref/request-response.html#django.http.HttpRequest.scheme" title="django.http.HttpRequest.scheme"><tt class="xref py py-attr docutils literal"><span class="pre">HttpRequest.scheme</span></tt></a> attribute
specifies the scheme of the request (<tt class="docutils literal"><span class="pre">http</span></tt> or <tt class="docutils literal"><span class="pre">https</span></tt> normally).</li>
<li>The shortcut <a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.redirect" title="django.shortcuts.redirect"><tt class="xref py py-func docutils literal"><span class="pre">redirect()</span></tt></a> now supports
relative URLs.</li>
<li>The new <a class="reference internal" href="../ref/request-response.html#django.http.JsonResponse" title="django.http.JsonResponse"><tt class="xref py py-class docutils literal"><span class="pre">JsonResponse</span></tt></a> subclass of
<a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> helps easily create JSON-encoded responses.</li>
</ul>
</div>
<div class="section" id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner" title="django.test.runner.DiscoverRunner"><tt class="xref py py-class docutils literal"><span class="pre">DiscoverRunner</span></tt></a> has two new attributes,
<a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner.test_suite" title="django.test.runner.DiscoverRunner.test_suite"><tt class="xref py py-attr docutils literal"><span class="pre">test_suite</span></tt></a> and
<a class="reference internal" href="../topics/testing/advanced.html#django.test.runner.DiscoverRunner.test_runner" title="django.test.runner.DiscoverRunner.test_runner"><tt class="xref py py-attr docutils literal"><span class="pre">test_runner</span></tt></a>, which facilitate
overriding the way tests are collected and run.</li>
<li>The <tt class="docutils literal"><span class="pre">fetch_redirect_response</span></tt> argument was added to
<a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase.assertRedirects" title="django.test.SimpleTestCase.assertRedirects"><tt class="xref py py-meth docutils literal"><span class="pre">assertRedirects()</span></tt></a>. Since the test
client can&#8217;t fetch externals URLs, this allows you to use <tt class="docutils literal"><span class="pre">assertRedirects</span></tt>
with redirects that aren&#8217;t part of your Django app.</li>
<li>Correct handling of scheme when making comparisons in
<a class="reference internal" href="../topics/testing/tools.html#django.test.SimpleTestCase.assertRedirects" title="django.test.SimpleTestCase.assertRedirects"><tt class="xref py py-meth docutils literal"><span class="pre">assertRedirects()</span></tt></a>.</li>
<li>The <tt class="docutils literal"><span class="pre">secure</span></tt> argument was added to all the request methods of
<a class="reference internal" href="../topics/testing/tools.html#django.test.Client" title="django.test.Client"><tt class="xref py py-class docutils literal"><span class="pre">Client</span></tt></a>. If <tt class="docutils literal"><span class="pre">True</span></tt>, the request will be made
through HTTPS.</li>
<li><a class="reference internal" href="../topics/testing/tools.html#django.test.TransactionTestCase.assertNumQueries" title="django.test.TransactionTestCase.assertNumQueries"><tt class="xref py py-meth docutils literal"><span class="pre">assertNumQueries()</span></tt></a> now prints
out the list of executed queries if the assertion fails.</li>
<li>The <tt class="docutils literal"><span class="pre">WSGIRequest</span></tt> instance generated by the test handler is now attached to
the <a class="reference internal" href="../topics/testing/tools.html#django.test.Response.wsgi_request" title="django.test.Response.wsgi_request"><tt class="xref py py-attr docutils literal"><span class="pre">django.test.Response.wsgi_request</span></tt></a> attribute.</li>
<li>The database settings for testing have been collected into a dictionary
named <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-TEST"><tt class="xref std std-setting docutils literal"><span class="pre">TEST</span></tt></a>.</li>
</ul>
</div>
<div class="section" id="s-utilities">
<span id="utilities"></span><h4>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Improved <a class="reference internal" href="../ref/utils.html#django.utils.html.strip_tags" title="django.utils.html.strip_tags"><tt class="xref py py-func docutils literal"><span class="pre">strip_tags()</span></tt></a> accuracy (but it still cannot
guarantee an HTML-safe result, as stated in the documentation).</li>
</ul>
</div>
<div class="section" id="s-validators">
<span id="validators"></span><h4>Validators<a class="headerlink" href="#validators" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="../ref/validators.html#django.core.validators.RegexValidator" title="django.core.validators.RegexValidator"><tt class="xref py py-class docutils literal"><span class="pre">RegexValidator</span></tt></a> now accepts the optional
<a class="reference internal" href="../ref/validators.html#django.core.validators.RegexValidator.flags" title="django.core.validators.RegexValidator.flags"><tt class="xref py py-attr docutils literal"><span class="pre">flags</span></tt></a> and
Boolean <a class="reference internal" href="../ref/validators.html#django.core.validators.RegexValidator.inverse_match" title="django.core.validators.RegexValidator.inverse_match"><tt class="xref py py-attr docutils literal"><span class="pre">inverse_match</span></tt></a> arguments.
The <a class="reference internal" href="../ref/validators.html#django.core.validators.RegexValidator.inverse_match" title="django.core.validators.RegexValidator.inverse_match"><tt class="xref py py-attr docutils literal"><span class="pre">inverse_match</span></tt></a> attribute
determines if the <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.ValidationError" title="django.core.exceptions.ValidationError"><tt class="xref py py-exc docutils literal"><span class="pre">ValidationError</span></tt></a> should
be raised when the regular expression pattern matches (<tt class="docutils literal"><span class="pre">True</span></tt>) or does not
match (<tt class="docutils literal"><span class="pre">False</span></tt>, by default) the provided <tt class="docutils literal"><span class="pre">value</span></tt>. The
<a class="reference internal" href="../ref/validators.html#django.core.validators.RegexValidator.flags" title="django.core.validators.RegexValidator.flags"><tt class="xref py py-attr docutils literal"><span class="pre">flags</span></tt></a> attribute sets the flags
used when compiling a regular expression string.</li>
<li><a class="reference internal" href="../ref/validators.html#django.core.validators.URLValidator" title="django.core.validators.URLValidator"><tt class="xref py py-class docutils literal"><span class="pre">URLValidator</span></tt></a> now accepts an optional
<tt class="docutils literal"><span class="pre">schemes</span></tt> argument which allows customization of the accepted URI schemes
(instead of the defaults <tt class="docutils literal"><span class="pre">http(s)</span></tt> and <tt class="docutils literal"><span class="pre">ftp(s)</span></tt>).</li>
<li><a class="reference internal" href="../ref/validators.html#django.core.validators.validate_email" title="django.core.validators.validate_email"><tt class="xref py py-func docutils literal"><span class="pre">validate_email()</span></tt></a> now accepts addresses with
IPv6 literals, like <tt class="docutils literal"><span class="pre">example&#64;[2001:db8::1]</span></tt>, as specified in RFC 5321.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-backwards-incompatible-changes-in-1-7">
<span id="backwards-incompatible-changes-in-1-7"></span><h2>Backwards incompatible changes in 1.7<a class="headerlink" href="#backwards-incompatible-changes-in-1-7" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In addition to the changes outlined in this section, be sure to review the
<a class="reference internal" href="../internals/deprecation.html#deprecation-removed-in-1-7"><em>deprecation plan</em></a> for any features that
have been removed. If you haven&#8217;t updated your code within the
deprecation timeline for a given feature, its removal may appear as a
backwards incompatible change.</p>
</div>
<div class="section" id="s-allow-syncdb-allow-migrate">
<span id="allow-syncdb-allow-migrate"></span><h3>allow_syncdb/allow_migrate<a class="headerlink" href="#allow-syncdb-allow-migrate" title="Permalink to this headline">¶</a></h3>
<p>While Django will still look at <tt class="docutils literal"><span class="pre">allow_syncdb</span></tt> methods even though they
should be renamed to <tt class="docutils literal"><span class="pre">allow_migrate</span></tt>, there is a subtle difference in which
models get passed to these methods.</p>
<p>For apps with migrations, <tt class="docutils literal"><span class="pre">allow_migrate</span></tt> will now get passed
<a class="reference internal" href="../topics/migrations.html#historical-models"><em>historical models</em></a>, which are special versioned models
without custom attributes, methods or managers. Make sure your <tt class="docutils literal"><span class="pre">allow_migrate</span></tt>
methods are only referring to fields or other items in <tt class="docutils literal"><span class="pre">model._meta</span></tt>.</p>
</div>
<div class="section" id="s-initial-data">
<span id="initial-data"></span><h3>initial_data<a class="headerlink" href="#initial-data" title="Permalink to this headline">¶</a></h3>
<p>Apps with migrations will not load <tt class="docutils literal"><span class="pre">initial_data</span></tt> fixtures when they have
finished migrating. Apps without migrations will continue to load these fixtures
during the phase of <tt class="docutils literal"><span class="pre">migrate</span></tt> which emulates the old <tt class="docutils literal"><span class="pre">syncdb</span></tt> behavior,
but any new apps will not have this support.</p>
<p>Instead, you are encouraged to load initial data in migrations if you need it
(using the <tt class="docutils literal"><span class="pre">RunPython</span></tt> operation and your model classes);
this has the added advantage that your initial data will not need updating
every time you change the schema.</p>
<p>Additionally, like the rest of Django&#8217;s old <tt class="docutils literal"><span class="pre">syncdb</span></tt> code, <tt class="docutils literal"><span class="pre">initial_data</span></tt>
has been started down the deprecation path and will be removed in Django 1.9.</p>
</div>
<div class="section" id="s-deconstruct-and-serializability">
<span id="deconstruct-and-serializability"></span><h3>deconstruct() and serializability<a class="headerlink" href="#deconstruct-and-serializability" title="Permalink to this headline">¶</a></h3>
<p>Django now requires all Field classes and all of their constructor arguments
to be serializable. If you modify the constructor signature in your custom
Field in any way, you&#8217;ll need to implement a deconstruct() method;
we&#8217;ve expanded the custom field documentation with <a class="reference internal" href="../howto/custom-model-fields.html#custom-field-deconstruct-method"><em>instructions
on implementing this method</em></a>.</p>
<p>The requirement for all field arguments to be
<a class="reference internal" href="../topics/migrations.html#migration-serializing"><em>serializable</em></a> means that any custom class
instances being passed into Field constructors - things like custom Storage
subclasses, for instance - need to have a <a class="reference internal" href="../topics/migrations.html#custom-deconstruct-method"><em>deconstruct method defined on
them as well</em></a>, though Django provides a handy
class decorator that will work for most applications.</p>
</div>
<div class="section" id="s-app-loading-changes">
<span id="app-loading-changes"></span><h3>App-loading changes<a class="headerlink" href="#app-loading-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-start-up-sequence">
<span id="start-up-sequence"></span><h4>Start-up sequence<a class="headerlink" href="#start-up-sequence" title="Permalink to this headline">¶</a></h4>
<p>Django 1.7 loads application configurations and models as soon as it starts.
While this behavior is more straightforward and is believed to be more robust,
regressions cannot be ruled out. See <a class="reference internal" href="../ref/applications.html#applications-troubleshooting"><em>Troubleshooting</em></a> for
solutions to some problems you may encounter.</p>
</div>
<div class="section" id="s-standalone-scripts">
<span id="standalone-scripts"></span><h4>Standalone scripts<a class="headerlink" href="#standalone-scripts" title="Permalink to this headline">¶</a></h4>
<p>If you&#8217;re using Django in a plain Python script — rather than a management
command — and you rely on the <span class="target" id="index-0"></span><a class="reference internal" href="../topics/settings.html#envvar-DJANGO_SETTINGS_MODULE"><tt class="xref std std-envvar docutils literal"><span class="pre">DJANGO_SETTINGS_MODULE</span></tt></a> environment
variable, you must now explicitly initialize Django at the beginning of your
script with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">django</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">django</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
</pre></div>
</div>
<p>Otherwise, you will hit an <tt class="docutils literal"><span class="pre">AppRegistryNotReady</span></tt> exception.</p>
</div>
<div class="section" id="s-wsgi-scripts">
<span id="wsgi-scripts"></span><h4>WSGI scripts<a class="headerlink" href="#wsgi-scripts" title="Permalink to this headline">¶</a></h4>
<p>Until Django 1.3, the recommended way to create a WSGI application was:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">django.core.handlers.wsgi</span>
<span class="n">application</span> <span class="o">=</span> <span class="n">django</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">wsgi</span><span class="o">.</span><span class="n">WSGIHandler</span><span class="p">()</span>
</pre></div>
</div>
<p>In Django 1.4, support for WSGI was improved and the API changed to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.wsgi</span> <span class="kn">import</span> <span class="n">get_wsgi_application</span>
<span class="n">application</span> <span class="o">=</span> <span class="n">get_wsgi_application</span><span class="p">()</span>
</pre></div>
</div>
<p>If you&#8217;re still using the former style in your WSGI script, you need to
upgrade to the latter, or you will hit an <tt class="docutils literal"><span class="pre">AppRegistryNotReady</span></tt> exception.</p>
</div>
<div class="section" id="s-app-registry-consistency">
<span id="app-registry-consistency"></span><h4>App registry consistency<a class="headerlink" href="#app-registry-consistency" title="Permalink to this headline">¶</a></h4>
<p>It is no longer possible to have multiple installed applications with the same
label. In previous versions of Django, this didn&#8217;t always work correctly, but
didn&#8217;t crash outright either.</p>
<p>If you have two apps with the same label, you should create an
<a class="reference internal" href="../ref/applications.html#django.apps.AppConfig" title="django.apps.AppConfig"><tt class="xref py py-class docutils literal"><span class="pre">AppConfig</span></tt></a> for one of them and override its
<a class="reference internal" href="../ref/applications.html#django.apps.AppConfig.label" title="django.apps.AppConfig.label"><tt class="xref py py-class docutils literal"><span class="pre">label</span></tt></a> there. You should then adjust your code
wherever it references this application or its models with the old label.</p>
<p>It isn&#8217;t possible to import the same model twice through different paths any
more. As of Django 1.6, this may happen only if you&#8217;re manually putting a
directory and a subdirectory on <span class="target" id="index-1"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" title="(in Python v3.4)"><tt class="xref std std-envvar docutils literal"><span class="pre">PYTHONPATH</span></tt></a>. Refer to the section on
the new project layout in the <a class="reference internal" href="1.4.html"><em>1.4 release notes</em></a> for
migration instructions.</p>
<p>You should make sure that:</p>
<ul class="simple">
<li>All models are defined in applications that are listed in
<a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> or have an explicit
<a class="reference internal" href="../ref/models/options.html#django.db.models.Options.app_label" title="django.db.models.Options.app_label"><tt class="xref py py-attr docutils literal"><span class="pre">app_label</span></tt></a>.</li>
<li>Models aren&#8217;t imported as a side-effect of loading their application.
Specifically, you shouldn&#8217;t import models in the root module of an
application nor in the module that define its configuration class.</li>
</ul>
<p>Django will enforce these requirements as of version 1.9, after a deprecation
period.</p>
</div>
<div class="section" id="s-subclassing-appcommand">
<span id="subclassing-appcommand"></span><h4>Subclassing AppCommand<a class="headerlink" href="#subclassing-appcommand" title="Permalink to this headline">¶</a></h4>
<p>Subclasses of <a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.AppCommand" title="django.core.management.AppCommand"><tt class="xref py py-class docutils literal"><span class="pre">AppCommand</span></tt></a> must now implement a
<a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.AppCommand.handle_app_config" title="django.core.management.AppCommand.handle_app_config"><tt class="xref py py-meth docutils literal"><span class="pre">handle_app_config()</span></tt></a> method instead of
<tt class="docutils literal"><span class="pre">handle_app()</span></tt>. This method receives an <a class="reference internal" href="../ref/applications.html#django.apps.AppConfig" title="django.apps.AppConfig"><tt class="xref py py-class docutils literal"><span class="pre">AppConfig</span></tt></a>
instance instead of a models module.</p>
</div>
<div class="section" id="s-introspecting-applications">
<span id="introspecting-applications"></span><h4>Introspecting applications<a class="headerlink" href="#introspecting-applications" title="Permalink to this headline">¶</a></h4>
<p>Since <a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> now supports application configuration classes
in addition to application modules, you should review code that accesses this
setting directly and use the app registry (<a class="reference internal" href="../ref/applications.html#django.apps.apps" title="django.apps.apps"><tt class="xref py py-attr docutils literal"><span class="pre">django.apps.apps</span></tt></a>) instead.</p>
<p>The app registry has preserved some features of the old app cache. Even though
the app cache was a private API, obsolete methods and arguments will be
removed through a standard deprecation path, with the exception of the
following changes that take effect immediately:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">get_model</span></tt> raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#LookupError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">LookupError</span></tt></a> instead of returning <tt class="docutils literal"><span class="pre">None</span></tt> when no
model is found.</li>
<li>The <tt class="docutils literal"><span class="pre">only_installed</span></tt> argument of <tt class="docutils literal"><span class="pre">get_model</span></tt> and <tt class="docutils literal"><span class="pre">get_models</span></tt> no
longer exists, nor does the <tt class="docutils literal"><span class="pre">seed_cache</span></tt> argument of <tt class="docutils literal"><span class="pre">get_model</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="s-management-commands-and-order-of-installed-apps">
<span id="management-commands-and-order-of-installed-apps"></span><h3>Management commands and order of <a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a><a class="headerlink" href="#management-commands-and-order-of-installed-apps" title="Permalink to this headline">¶</a></h3>
<p>When several applications provide management commands with the same name,
Django loads the command from the application that comes first in
<a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a>. Previous versions loaded the command from the
application that came last.</p>
<p>This brings discovery of management commands in line with other parts of
Django that rely on the order of <a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a>, such as static
files, templates, and translations.</p>
</div>
<div class="section" id="s-validationerror-constructor-and-internal-storage">
<span id="s-validation-error-constructor-and-internal-storage"></span><span id="validationerror-constructor-and-internal-storage"></span><span id="validation-error-constructor-and-internal-storage"></span><h3><tt class="docutils literal"><span class="pre">ValidationError</span></tt> constructor and internal storage<a class="headerlink" href="#validationerror-constructor-and-internal-storage" title="Permalink to this headline">¶</a></h3>
<p>The behavior of the <tt class="docutils literal"><span class="pre">ValidationError</span></tt> constructor has changed when it
receives a container of errors as an argument (e.g. a <tt class="docutils literal"><span class="pre">list</span></tt> or an
<tt class="docutils literal"><span class="pre">ErrorList</span></tt>):</p>
<ul class="simple">
<li>It converts any strings it finds to instances of <tt class="docutils literal"><span class="pre">ValidationError</span></tt>
before adding them to its internal storage.</li>
<li>It doesn&#8217;t store the given container but rather copies its content to its
own internal storage; previously the container itself was added to the
<tt class="docutils literal"><span class="pre">ValidationError</span></tt> instance and used as internal storage.</li>
</ul>
<p>This means that if you access the <tt class="docutils literal"><span class="pre">ValidationError</span></tt> internal storages, such
as <tt class="docutils literal"><span class="pre">error_list</span></tt>; <tt class="docutils literal"><span class="pre">error_dict</span></tt>; or the return value of
<tt class="docutils literal"><span class="pre">update_error_dict()</span></tt> you may find instances of <tt class="docutils literal"><span class="pre">ValidationError</span></tt> where you
would have previously found strings.</p>
<p>Also if you directly assigned the return value of <tt class="docutils literal"><span class="pre">update_error_dict()</span></tt>
to <tt class="docutils literal"><span class="pre">Form._errors</span></tt> you may inadvertently add <cite>list</cite> instances where
<tt class="docutils literal"><span class="pre">ErrorList</span></tt> instances are expected. This is a problem because unlike a
simple <cite>list</cite>, an <tt class="docutils literal"><span class="pre">ErrorList</span></tt> knows how to handle instances of
<tt class="docutils literal"><span class="pre">ValidationError</span></tt>.</p>
<p>Most use-cases that warranted using these private APIs are now covered by
the newly introduced <a class="reference internal" href="../ref/forms/api.html#django.forms.Form.add_error" title="django.forms.Form.add_error"><tt class="xref py py-meth docutils literal"><span class="pre">Form.add_error()</span></tt></a>
method:</p>
<div class="highlight-python"><div class="highlight"><pre># Old pattern:
try:
    # ...
except ValidationError as e:
    self._errors = e.update_error_dict(self._errors)

# New pattern:
try:
    # ...
except ValidationError as e:
    self.add_error(None, e)
</pre></div>
</div>
<p>If you need both Django &lt;= 1.6 and 1.7 compatibility you can&#8217;t use
<a class="reference internal" href="../ref/forms/api.html#django.forms.Form.add_error" title="django.forms.Form.add_error"><tt class="xref py py-meth docutils literal"><span class="pre">Form.add_error()</span></tt></a> since it
wasn&#8217;t available before Django 1.7, but you can use the following
workaround to convert any <tt class="docutils literal"><span class="pre">list</span></tt> into <tt class="docutils literal"><span class="pre">ErrorList</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>try:
    # ...
except ValidationError as e:
    self._errors = e.update_error_dict(self._errors)

# Additional code to ensure ``ErrorDict`` is exclusively
# composed of ``ErrorList`` instances.
for field, error_list in self._errors.items():
    if not isinstance(error_list, self.error_class):
        self._errors[field] = self.error_class(error_list)
</pre></div>
</div>
</div>
<div class="section" id="s-behavior-of-locmemcache-regarding-pickle-errors">
<span id="behavior-of-locmemcache-regarding-pickle-errors"></span><h3>Behavior of <tt class="docutils literal"><span class="pre">LocMemCache</span></tt> regarding pickle errors<a class="headerlink" href="#behavior-of-locmemcache-regarding-pickle-errors" title="Permalink to this headline">¶</a></h3>
<p>An inconsistency existed in previous versions of Django regarding how pickle
errors are handled by different cache backends.
<tt class="docutils literal"><span class="pre">django.core.cache.backends.locmem.LocMemCache</span></tt> used to fail silently when
such an error occurs, which is inconsistent with other backends and leads to
cache-specific errors. This has been fixed in Django 1.7, see
<a class="reference external" href="https://code.djangoproject.com/ticket/21200">#21200</a> for more details.</p>
</div>
<div class="section" id="s-cache-keys-are-now-generated-from-the-request-s-absolute-url">
<span id="cache-keys-are-now-generated-from-the-request-s-absolute-url"></span><h3>Cache keys are now generated from the request&#8217;s absolute URL<a class="headerlink" href="#cache-keys-are-now-generated-from-the-request-s-absolute-url" title="Permalink to this headline">¶</a></h3>
<p>Previous versions of Django generated cache keys using a request&#8217;s path and
query string but not the scheme or host. If a Django application was serving
multiple subdomains or domains, cache keys could collide. In Django 1.7, cache
keys vary by the absolute URL of the request including scheme, host, path, and
query string. For example, the URL portion of a cache key is now generated from
<tt class="docutils literal"><span class="pre">http://www.example.com/path/to/?key=val</span></tt> rather than <tt class="docutils literal"><span class="pre">/path/to/?key=val</span></tt>.
The cache keys generated by Django 1.7 will be different from the keys
generated by older versions of Django. After upgrading to Django 1.7, the first
request to any previously cached URL will be a cache miss.</p>
</div>
<div class="section" id="s-passing-none-to-manager-db-manager">
<span id="passing-none-to-manager-db-manager"></span><h3>Passing <tt class="docutils literal"><span class="pre">None</span></tt> to <tt class="docutils literal"><span class="pre">Manager.db_manager()</span></tt><a class="headerlink" href="#passing-none-to-manager-db-manager" title="Permalink to this headline">¶</a></h3>
<p>In previous versions of Django, it was possible to use
<tt class="docutils literal"><span class="pre">db_manager(using=None)</span></tt> on a model manager instance to obtain a manager
instance using default routing behavior, overriding any manually specified
database routing. In Django 1.7, a value of <tt class="docutils literal"><span class="pre">None</span></tt> passed to db_manager will
produce a router that <em>retains</em> any manually assigned database routing &#8211; the
manager will <em>not</em> be reset. This was necessary to resolve an inconsistency in
the way routing information cascaded over joins. See <a class="reference external" href="https://code.djangoproject.com/ticket/13724">#13724</a> for more
details.</p>
</div>
<div class="section" id="s-pytz-may-be-required">
<span id="pytz-may-be-required"></span><h3>pytz may be required<a class="headerlink" href="#pytz-may-be-required" title="Permalink to this headline">¶</a></h3>
<p>If your project handles datetimes before 1970 or after 2037 and Django raises
a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt></a> when encountering them, you will have to install <a class="reference external" href="https://pypi.python.org/pypi/pytz/">pytz</a>. You
may be affected by this problem if you use Django&#8217;s time zone-related date
formats or <a class="reference internal" href="../ref/contrib/syndication.html#module-django.contrib.syndication" title="django.contrib.syndication: A framework for generating syndication feeds, in RSS and Atom, quite easily."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.syndication</span></tt></a>.</p>
</div>
<div class="section" id="s-remove-and-clear-methods-of-related-managers">
<span id="remove-and-clear-methods-of-related-managers"></span><h3><tt class="docutils literal"><span class="pre">remove()</span></tt> and <tt class="docutils literal"><span class="pre">clear()</span></tt> methods of related managers<a class="headerlink" href="#remove-and-clear-methods-of-related-managers" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">remove()</span></tt> and <tt class="docutils literal"><span class="pre">clear()</span></tt> methods of the related managers created by
<tt class="docutils literal"><span class="pre">ForeignKey</span></tt>, <tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt>, and <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> suffered from a
number of issues. Some operations ran multiple data modifying queries without
wrapping them in a transaction, and some operations didn&#8217;t respect default
filtering when it was present (i.e. when the default manager on the related
model implemented a custom <tt class="docutils literal"><span class="pre">get_queryset()</span></tt>).</p>
<p>Fixing the issues introduced some backward incompatible changes:</p>
<ul class="simple">
<li>The default implementation of <tt class="docutils literal"><span class="pre">remove()</span></tt> for <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> related managers
changed from a series of <tt class="docutils literal"><span class="pre">Model.save()</span></tt> calls to a single
<tt class="docutils literal"><span class="pre">QuerySet.update()</span></tt> call. The change means that <tt class="docutils literal"><span class="pre">pre_save</span></tt> and
<tt class="docutils literal"><span class="pre">post_save</span></tt> signals aren&#8217;t sent anymore. You can use the <tt class="docutils literal"><span class="pre">bulk=False</span></tt>
keyword argument to revert to the previous behavior.</li>
<li>The <tt class="docutils literal"><span class="pre">remove()</span></tt> and <tt class="docutils literal"><span class="pre">clear()</span></tt> methods for <tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt> related
managers now perform bulk delete. The <tt class="docutils literal"><span class="pre">Model.delete()</span></tt> method isn&#8217;t called
on each instance anymore. You can use the <tt class="docutils literal"><span class="pre">bulk=False</span></tt> keyword argument to
revert to the previous behavior.</li>
<li>The <tt class="docutils literal"><span class="pre">remove()</span></tt> and <tt class="docutils literal"><span class="pre">clear()</span></tt> methods for <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> related
managers perform nested queries when filtering is involved, which may or
may not be an issue depending on your database and your data itself.
See <a class="reference internal" href="../ref/models/querysets.html#nested-queries-performance"><em>this note</em></a> for more details.</li>
</ul>
</div>
<div class="section" id="s-admin-login-redirection-strategy">
<span id="admin-login-redirection-strategy"></span><h3>Admin login redirection strategy<a class="headerlink" href="#admin-login-redirection-strategy" title="Permalink to this headline">¶</a></h3>
<p>Historically, the Django admin site passed the request from an unauthorized or
unauthenticated user directly to the login view, without HTTP redirection. In
Django 1.7, this behavior changed to conform to a more traditional workflow
where any unauthorized request to an admin page will be redirected (by HTTP
status code 302) to the login page, with the <tt class="docutils literal"><span class="pre">next</span></tt> parameter set to the
referring path. The user will be redirected there after a successful login.</p>
<p>Note also that the admin login form has been updated to not contain the
<tt class="docutils literal"><span class="pre">this_is_the_login_form</span></tt> field (now unused) and the <tt class="docutils literal"><span class="pre">ValidationError</span></tt> code
has been set to the more regular <tt class="docutils literal"><span class="pre">invalid_login</span></tt> key.</p>
</div>
<div class="section" id="s-select-for-update-requires-a-transaction">
<span id="select-for-update-requires-a-transaction"></span><h3><tt class="docutils literal"><span class="pre">select_for_update()</span></tt> requires a transaction<a class="headerlink" href="#select-for-update-requires-a-transaction" title="Permalink to this headline">¶</a></h3>
<p>Historically, queries that use
<a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.select_for_update" title="django.db.models.query.QuerySet.select_for_update"><tt class="xref py py-meth docutils literal"><span class="pre">select_for_update()</span></tt></a> could be
executed in autocommit mode, outside of a transaction. Before Django
1.6, Django&#8217;s automatic transactions mode allowed this to be used to
lock records until the next write operation. Django 1.6 introduced
database-level autocommit; since then, execution in such a context
voids the effect of <tt class="docutils literal"><span class="pre">select_for_update()</span></tt>. It is, therefore, assumed
now to be an error and raises an exception.</p>
<p>This change was made because such errors can be caused by including an
app which expects global transactions (e.g. <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-ATOMIC_REQUESTS"><tt class="xref std std-setting docutils literal"><span class="pre">ATOMIC_REQUESTS</span></tt></a> set to <tt class="docutils literal"><span class="pre">True</span></tt>), or Django&#8217;s old autocommit
behavior, in a project which runs without them; and further, such
errors may manifest as data-corruption bugs. It was also made in
Django 1.6.3.</p>
<p>This change may cause test failures if you use <tt class="docutils literal"><span class="pre">select_for_update()</span></tt>
in a test class which is a subclass of
<a class="reference internal" href="../topics/testing/tools.html#django.test.TransactionTestCase" title="django.test.TransactionTestCase"><tt class="xref py py-class docutils literal"><span class="pre">TransactionTestCase</span></tt></a> rather than
<a class="reference internal" href="../topics/testing/tools.html#django.test.TestCase" title="django.test.TestCase"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a>.</p>
</div>
<div class="section" id="s-contrib-middleware-removed-from-default-middleware-classes">
<span id="contrib-middleware-removed-from-default-middleware-classes"></span><h3>Contrib middleware removed from default <a class="reference internal" href="../ref/settings.html#std:setting-MIDDLEWARE_CLASSES"><tt class="xref std std-setting docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt></a><a class="headerlink" href="#contrib-middleware-removed-from-default-middleware-classes" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#app-loading-refactor-17-release-note"><em>app-loading refactor</em></a>
deprecated using models from apps which are not part of the
<a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> setting. This exposed an incompatibility between
the default <a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> and <a class="reference internal" href="../ref/settings.html#std:setting-MIDDLEWARE_CLASSES"><tt class="xref std std-setting docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt></a> in the
global defaults (<tt class="docutils literal"><span class="pre">django.conf.global_settings</span></tt>). To bring these settings in
sync and prevent deprecation warnings when doing things like testing reusable
apps with minimal settings,
<a class="reference internal" href="../ref/middleware.html#django.contrib.sessions.middleware.SessionMiddleware" title="django.contrib.sessions.middleware.SessionMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">SessionMiddleware</span></tt></a>,
<a class="reference internal" href="../ref/middleware.html#django.contrib.auth.middleware.AuthenticationMiddleware" title="django.contrib.auth.middleware.AuthenticationMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">AuthenticationMiddleware</span></tt></a>, and
<a class="reference internal" href="../ref/middleware.html#django.contrib.messages.middleware.MessageMiddleware" title="django.contrib.messages.middleware.MessageMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">MessageMiddleware</span></tt></a> were removed
from the defaults. These classes will still be included in the default settings
generated by <a class="reference internal" href="../ref/django-admin.html#django-admin-startproject"><tt class="xref std std-djadmin docutils literal"><span class="pre">startproject</span></tt></a>. Most projects will not be affected by
this change but if you were not previously declaring the
<a class="reference internal" href="../ref/settings.html#std:setting-MIDDLEWARE_CLASSES"><tt class="xref std std-setting docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt></a> in your project settings and relying on the
global default you should ensure that the new defaults are in line with your
project&#8217;s needs. You should also check for any code that accesses
<tt class="docutils literal"><span class="pre">django.conf.global_settings.MIDDLEWARE_CLASSES</span></tt> directly.</p>
</div>
<div class="section" id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The <a class="reference internal" href="../ref/files/uploads.html#django.core.files.uploadhandler.FileUploadHandler.new_file" title="django.core.files.uploadhandler.FileUploadHandler.new_file"><tt class="xref py py-meth docutils literal"><span class="pre">django.core.files.uploadhandler.FileUploadHandler.new_file()</span></tt></a>
method is now passed an additional <tt class="docutils literal"><span class="pre">content_type_extra</span></tt> parameter. If you
have a custom <a class="reference internal" href="../ref/files/uploads.html#django.core.files.uploadhandler.FileUploadHandler" title="django.core.files.uploadhandler.FileUploadHandler"><tt class="xref py py-class docutils literal"><span class="pre">FileUploadHandler</span></tt></a>
that implements <tt class="docutils literal"><span class="pre">new_file()</span></tt>, be sure it accepts this new parameter.</p>
</li>
<li><p class="first"><a class="reference internal" href="../topics/forms/modelforms.html#django.forms.models.BaseModelFormSet" title="django.forms.models.BaseModelFormSet"><tt class="xref py py-class docutils literal"><span class="pre">ModelFormSet</span></tt></a>s no longer
delete instances when <tt class="docutils literal"><span class="pre">save(commit=False)</span></tt> is called. See
<a class="reference internal" href="../topics/forms/formsets.html#django.forms.formsets.BaseFormSet.can_delete" title="django.forms.formsets.BaseFormSet.can_delete"><tt class="xref py py-attr docutils literal"><span class="pre">can_delete</span></tt></a> for instructions on how
to manually delete objects from deleted forms.</p>
</li>
<li><p class="first">Loading empty fixtures emits a <tt class="docutils literal"><span class="pre">RuntimeWarning</span></tt> rather than raising
<a class="reference internal" href="../howto/custom-management-commands.html#django.core.management.CommandError" title="django.core.management.CommandError"><tt class="xref py py-class docutils literal"><span class="pre">CommandError</span></tt></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.views.serve" title="django.contrib.staticfiles.views.serve"><tt class="xref py py-func docutils literal"><span class="pre">django.contrib.staticfiles.views.serve()</span></tt></a> will now raise an
<a class="reference internal" href="../topics/http/views.html#django.http.Http404" title="django.http.Http404"><tt class="xref py py-exc docutils literal"><span class="pre">Http404</span></tt></a> exception instead of
<a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.ImproperlyConfigured" title="django.core.exceptions.ImproperlyConfigured"><tt class="xref py py-exc docutils literal"><span class="pre">ImproperlyConfigured</span></tt></a> when <a class="reference internal" href="../ref/settings.html#std:setting-DEBUG"><tt class="xref std std-setting docutils literal"><span class="pre">DEBUG</span></tt></a>
is <tt class="docutils literal"><span class="pre">False</span></tt>. This change removes the need to conditionally add the view to
your root URLconf, which in turn makes it safe to reverse by name. It also
removes the ability for visitors to generate spurious HTTP 500 errors by
requesting static files that don&#8217;t exist or haven&#8217;t been collected yet.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.__eq__" title="django.db.models.Model.__eq__"><tt class="xref py py-meth docutils literal"><span class="pre">django.db.models.Model.__eq__()</span></tt></a> method is now defined in a
way where instances of a proxy model and its base model are considered
equal when primary keys match. Previously only instances of exact same
class were considered equal on primary key match.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.__eq__" title="django.db.models.Model.__eq__"><tt class="xref py py-meth docutils literal"><span class="pre">django.db.models.Model.__eq__()</span></tt></a> method has changed such that
two <tt class="docutils literal"><span class="pre">Model</span></tt> instances without primary key values won&#8217;t be considered
equal (unless they are the same instance).</p>
</li>
<li><p class="first">The <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.__hash__" title="django.db.models.Model.__hash__"><tt class="xref py py-meth docutils literal"><span class="pre">django.db.models.Model.__hash__()</span></tt></a> method will now raise <tt class="docutils literal"><span class="pre">TypeError</span></tt>
when called on an instance without a primary key value. This is done to
avoid mutable <tt class="docutils literal"><span class="pre">__hash__</span></tt> values in containers.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/models/fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><tt class="xref py py-class docutils literal"><span class="pre">AutoField</span></tt></a> columns in SQLite databases will now be
created using the <tt class="docutils literal"><span class="pre">AUTOINCREMENT</span></tt> option, which guarantees monotonic
increments. This will cause primary key numbering behavior to change on
SQLite, becoming consistent with most other SQL databases. This will only
apply to newly created tables. If you have a database created with an older
version of Django, you will need to migrate it to take advantage of this
feature. For example, you could do the following:</p>
<ol class="arabic simple">
<li>Use <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><tt class="xref std std-djadmin docutils literal"><span class="pre">dumpdata</span></tt></a> to save your data.</li>
<li>Rename the existing database file (keep it as a backup).</li>
<li>Run <a class="reference internal" href="../ref/django-admin.html#django-admin-migrate"><tt class="xref std std-djadmin docutils literal"><span class="pre">migrate</span></tt></a> to create the updated schema.</li>
<li>Use <a class="reference internal" href="../ref/django-admin.html#django-admin-loaddata"><tt class="xref std std-djadmin docutils literal"><span class="pre">loaddata</span></tt></a> to import the fixtures you exported in (1).</li>
</ol>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">django.contrib.auth.models.AbstractUser</span></tt> no longer defines a
<a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.get_absolute_url" title="django.db.models.Model.get_absolute_url"><tt class="xref py py-meth docutils literal"><span class="pre">get_absolute_url()</span></tt></a> method. The old definition
returned  <tt class="docutils literal"><span class="pre">&quot;/users/%s/&quot;</span> <span class="pre">%</span> <span class="pre">urlquote(self.username)</span></tt> which was arbitrary
since applications may or may not define such a url in <tt class="docutils literal"><span class="pre">urlpatterns</span></tt>.
Define a <tt class="docutils literal"><span class="pre">get_absolute_url()</span></tt> method on your own custom user object or use
<a class="reference internal" href="../ref/settings.html#std:setting-ABSOLUTE_URL_OVERRIDES"><tt class="xref std std-setting docutils literal"><span class="pre">ABSOLUTE_URL_OVERRIDES</span></tt></a> if you want a URL for your user.</p>
</li>
<li><p class="first">The static asset-serving functionality of the
<a class="reference internal" href="../topics/testing/tools.html#django.test.LiveServerTestCase" title="django.test.LiveServerTestCase"><tt class="xref py py-class docutils literal"><span class="pre">django.test.LiveServerTestCase</span></tt></a> class has been simplified: Now it&#8217;s
only able to serve content already present in <a class="reference internal" href="../ref/settings.html#std:setting-STATIC_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_ROOT</span></tt></a> when
tests are run. The ability to transparently serve all the static assets
(similarly to what one gets with <a class="reference internal" href="../ref/settings.html#std:setting-DEBUG"><tt class="xref std std-setting docutils literal"><span class="pre">DEBUG</span> <span class="pre">=</span> <span class="pre">True</span></tt></a> at
development-time) has been moved to a new class that lives in the
<tt class="docutils literal"><span class="pre">staticfiles</span></tt> application (the one actually in charge of such feature):
<a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.testing.StaticLiveServerTestCase" title="django.contrib.staticfiles.testing.StaticLiveServerTestCase"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.staticfiles.testing.StaticLiveServerTestCase</span></tt></a>. In other
words, <tt class="docutils literal"><span class="pre">LiveServerTestCase</span></tt> itself is less powerful but at the same time
has less magic.</p>
<p>Rationale behind this is removal of dependency of non-contrib code on
contrib applications.</p>
</li>
<li><p class="first">The old cache URI syntax (e.g. <tt class="docutils literal"><span class="pre">&quot;locmem://&quot;</span></tt>) is no longer supported. It
still worked, even though it was not documented or officially supported. If
you&#8217;re still using it, please update to the current <a class="reference internal" href="../ref/settings.html#std:setting-CACHES"><tt class="xref std std-setting docutils literal"><span class="pre">CACHES</span></tt></a> syntax.</p>
</li>
<li><p class="first">The default ordering of <tt class="docutils literal"><span class="pre">Form</span></tt> fields in case of inheritance has changed to
follow normal Python MRO. Fields are now discovered by iterating through the
MRO in reverse with the topmost class coming last. This only affects you if
you relied on the default field ordering while having fields defined on both
the current class <em>and</em> on a parent <tt class="docutils literal"><span class="pre">Form</span></tt>.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">required</span></tt> argument of
<a class="reference internal" href="../ref/forms/widgets.html#django.forms.extras.widgets.SelectDateWidget" title="django.forms.extras.widgets.SelectDateWidget"><tt class="xref py py-class docutils literal"><span class="pre">SelectDateWidget</span></tt></a> has been removed.
This widget now respects the form field&#8217;s <tt class="docutils literal"><span class="pre">is_required</span></tt> attribute like
other widgets.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Widget.is_hidden</span></tt> is now a read-only property, getting its value by
introspecting the presence of <tt class="docutils literal"><span class="pre">input_type</span> <span class="pre">==</span> <span class="pre">'hidden'</span></tt>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.select_related" title="django.db.models.query.QuerySet.select_related"><tt class="xref py py-meth docutils literal"><span class="pre">select_related()</span></tt></a> now chains in the
same way as other similar calls like <tt class="docutils literal"><span class="pre">prefetch_related</span></tt>. That is,
<tt class="docutils literal"><span class="pre">select_related('foo',</span> <span class="pre">'bar')</span></tt> is equivalent to
<tt class="docutils literal"><span class="pre">select_related('foo').select_related('bar')</span></tt>. Previously the latter would
have been equivalent to <tt class="docutils literal"><span class="pre">select_related('bar')</span></tt>.</p>
</li>
<li><p class="first">GeoDjango dropped support for GEOS &lt; 3.1.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">init_connection_state</span></tt> method of database backends now executes in
autocommit mode (unless you set <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-AUTOCOMMIT"><tt class="xref std std-setting docutils literal"><span class="pre">AUTOCOMMIT</span></tt></a>
to <tt class="docutils literal"><span class="pre">False</span></tt>). If you maintain a custom database backend, you should check
that method.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">django.db.backends.BaseDatabaseFeatures.allows_primary_key_0</span></tt>
attribute has been renamed to <tt class="docutils literal"><span class="pre">allows_auto_pk_0</span></tt> to better describe it.
It&#8217;s <tt class="docutils literal"><span class="pre">True</span></tt> for all database backends included with Django except MySQL
which does allow primary keys with value 0. It only forbids <em>autoincrement</em>
primary keys with value 0.</p>
</li>
<li><p class="first">Shadowing model fields defined in a parent model has been forbidden as this
creates ambiguity in the expected model behavior. In addition, clashing
fields in the model inheritance hierarchy result in a system check error.
For example, if you use multi-inheritance, you need to define custom primary
key fields on parent models, otherwise the default <tt class="docutils literal"><span class="pre">id</span></tt> fields will clash.
See <a class="reference internal" href="../topics/db/models.html#model-multiple-inheritance-topic"><em>Multiple inheritance</em></a> for details.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">django.utils.translation.parse_accept_lang_header()</span></tt> now returns
lowercase locales, instead of the case as it was provided. As locales should
be treated case-insensitive this allows us to speed up locale detection.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">django.utils.translation.get_language_from_path()</span></tt> and
<tt class="docutils literal"><span class="pre">django.utils.translation.trans_real.get_supported_language_variant()</span></tt>
now no longer have a <tt class="docutils literal"><span class="pre">supported</span></tt> argument.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">shortcut</span></tt> view in <tt class="docutils literal"><span class="pre">django.contrib.contenttypes.views</span></tt> now supports
protocol-relative URLs (e.g. <tt class="docutils literal"><span class="pre">//example.com</span></tt>).</p>
</li>
<li><p class="first"><a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.fields.GenericRelation" title="django.contrib.contenttypes.fields.GenericRelation"><tt class="xref py py-class docutils literal"><span class="pre">GenericRelation</span></tt></a> now supports an
optional <tt class="docutils literal"><span class="pre">related_query_name</span></tt> argument. Setting <tt class="docutils literal"><span class="pre">related_query_name</span></tt> adds
a relation from the related object back to the content type for filtering,
ordering and other query operations.</p>
</li>
<li><p class="first">When running tests on PostgreSQL, the <a class="reference internal" href="../ref/settings.html#std:setting-USER"><tt class="xref std std-setting docutils literal"><span class="pre">USER</span></tt></a> will need read access
to the built-in <tt class="docutils literal"><span class="pre">postgres</span></tt> database. This is in lieu of the previous
behavior of connecting to the actual non-test database.</p>
</li>
<li><p class="first">As part of the <a class="reference internal" href="../ref/checks.html"><em>System check framework</em></a>, <a class="reference internal" href="../topics/checks.html#field-checking"><em>fields,
models, and model managers</em></a> all implement a <tt class="docutils literal"><span class="pre">check()</span></tt>
method that is registered with the check framework. If you have an existing
method called <tt class="docutils literal"><span class="pre">check()</span></tt> on one of these objects, you will need to rename it.</p>
</li>
<li><p class="first">As noted above in the &#8220;Cache&#8221; section of &#8220;Minor Features&#8221;, defining the
<a class="reference internal" href="../ref/settings.html#std:setting-CACHES-TIMEOUT"><tt class="xref std std-setting docutils literal"><span class="pre">TIMEOUT</span></tt></a> argument of the
<a class="reference internal" href="../ref/settings.html#std:setting-CACHES"><tt class="xref std std-setting docutils literal"><span class="pre">CACHES</span></tt></a> setting as <tt class="docutils literal"><span class="pre">None</span></tt> will set the cache keys as
&#8220;non-expiring&#8221;. Previously, with the memcache backend, a
<a class="reference internal" href="../ref/settings.html#std:setting-CACHES-TIMEOUT"><tt class="xref std std-setting docutils literal"><span class="pre">TIMEOUT</span></tt></a> of <tt class="docutils literal"><span class="pre">0</span></tt> would set non-expiring keys,
but this was inconsistent with the set-and-expire (i.e. no caching) behavior
of <tt class="docutils literal"><span class="pre">set(&quot;key&quot;,</span> <span class="pre">&quot;value&quot;,</span> <span class="pre">timeout=0)</span></tt>. If you want non-expiring keys,
please update your settings to use <tt class="docutils literal"><span class="pre">None</span></tt> instead of <tt class="docutils literal"><span class="pre">0</span></tt> as the latter
now designates set-and-expire in the settings as well.</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">sql*</span></tt> management commands now respect the <tt class="docutils literal"><span class="pre">allow_migrate()</span></tt> method
of <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE_ROUTERS"><tt class="xref std std-setting docutils literal"><span class="pre">DATABASE_ROUTERS</span></tt></a>. If you have models synced to non-default
databases, use the <a class="reference internal" href="../ref/django-admin.html#django-admin-option---database"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--database</span></tt></a> flag to get SQL for those
models (previously they would always be included in the output).</p>
</li>
<li><p class="first">Decoding the query string from URLs now falls back to the ISO-8859-1 encoding
when the input is not valid UTF-8.</p>
</li>
<li><p class="first">With the addition of the
<a class="reference internal" href="../ref/middleware.html#django.contrib.auth.middleware.SessionAuthenticationMiddleware" title="django.contrib.auth.middleware.SessionAuthenticationMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">SessionAuthenticationMiddleware</span></tt></a> to
the default project template (pre-1.7.2 only), a database must be created
before accessing a page using <a class="reference internal" href="../ref/django-admin.html#django-admin-runserver"><tt class="xref std std-djadmin docutils literal"><span class="pre">runserver</span></tt></a>.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="s-features-deprecated-in-1-7">
<span id="s-deprecated-features-1-7"></span><span id="features-deprecated-in-1-7"></span><span id="deprecated-features-1-7"></span><h2>Features deprecated in 1.7<a class="headerlink" href="#features-deprecated-in-1-7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-django-core-cache-get-cache">
<span id="django-core-cache-get-cache"></span><h3><tt class="docutils literal"><span class="pre">django.core.cache.get_cache</span></tt><a class="headerlink" href="#django-core-cache-get-cache" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../topics/cache.html#django.core.cache.get_cache" title="django.core.cache.get_cache"><tt class="xref py py-func docutils literal"><span class="pre">django.core.cache.get_cache()</span></tt></a> has been supplanted by
<a class="reference internal" href="../topics/cache.html#django.core.cache.caches" title="django.core.cache.caches"><tt class="xref py py-data docutils literal"><span class="pre">django.core.cache.caches</span></tt></a>.</p>
</div>
<div class="section" id="s-django-utils-dictconfig-django-utils-importlib">
<span id="django-utils-dictconfig-django-utils-importlib"></span><h3><tt class="docutils literal"><span class="pre">django.utils.dictconfig</span></tt>/<tt class="docutils literal"><span class="pre">django.utils.importlib</span></tt><a class="headerlink" href="#django-utils-dictconfig-django-utils-importlib" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.utils.dictconfig</span></tt> and <tt class="docutils literal"><span class="pre">django.utils.importlib</span></tt> were copies of
respectively <a class="reference external" href="https://docs.python.org/3/library/logging.config.html#module-logging.config" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">logging.config</span></tt></a> and <a class="reference external" href="https://docs.python.org/3/library/importlib.html#module-importlib" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">importlib</span></tt></a> provided for Python
versions prior to 2.7. They have been deprecated.</p>
</div>
<div class="section" id="s-django-utils-module-loading-import-by-path">
<span id="django-utils-module-loading-import-by-path"></span><h3><tt class="docutils literal"><span class="pre">django.utils.module_loading.import_by_path</span></tt><a class="headerlink" href="#django-utils-module-loading-import-by-path" title="Permalink to this headline">¶</a></h3>
<p>The current <a class="reference internal" href="../ref/utils.html#django.utils.module_loading.import_by_path" title="django.utils.module_loading.import_by_path"><tt class="xref py py-meth docutils literal"><span class="pre">import_by_path()</span></tt></a> function
catches <tt class="docutils literal"><span class="pre">AttributeError</span></tt>, <tt class="docutils literal"><span class="pre">ImportError</span></tt> and <tt class="docutils literal"><span class="pre">ValueError</span></tt> exceptions,
and re-raises <a class="reference internal" href="../ref/exceptions.html#django.core.exceptions.ImproperlyConfigured" title="django.core.exceptions.ImproperlyConfigured"><tt class="xref py py-exc docutils literal"><span class="pre">ImproperlyConfigured</span></tt></a>. Such
exception masking makes it needlessly hard to diagnose circular import
problems, because it makes it look like the problem comes from inside Django.
It has been deprecated in favor of
<a class="reference internal" href="../ref/utils.html#django.utils.module_loading.import_string" title="django.utils.module_loading.import_string"><tt class="xref py py-meth docutils literal"><span class="pre">import_string()</span></tt></a>.</p>
</div>
<div class="section" id="s-django-utils-tzinfo">
<span id="django-utils-tzinfo"></span><h3><tt class="docutils literal"><span class="pre">django.utils.tzinfo</span></tt><a class="headerlink" href="#django-utils-tzinfo" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.utils.tzinfo</span></tt> provided two <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.tzinfo" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">tzinfo</span></tt></a> subclasses,
<tt class="docutils literal"><span class="pre">LocalTimezone</span></tt> and <tt class="docutils literal"><span class="pre">FixedOffset</span></tt>. They&#8217;ve been deprecated in favor of
more correct alternatives provided by <a class="reference internal" href="../ref/utils.html#module-django.utils.timezone" title="django.utils.timezone: Timezone support."><tt class="xref py py-mod docutils literal"><span class="pre">django.utils.timezone</span></tt></a>,
<a class="reference internal" href="../ref/utils.html#django.utils.timezone.get_default_timezone" title="django.utils.timezone.get_default_timezone"><tt class="xref py py-func docutils literal"><span class="pre">django.utils.timezone.get_default_timezone()</span></tt></a> and
<a class="reference internal" href="../ref/utils.html#django.utils.timezone.get_fixed_timezone" title="django.utils.timezone.get_fixed_timezone"><tt class="xref py py-func docutils literal"><span class="pre">django.utils.timezone.get_fixed_timezone()</span></tt></a>.</p>
</div>
<div class="section" id="s-django-utils-unittest">
<span id="django-utils-unittest"></span><h3><tt class="docutils literal"><span class="pre">django.utils.unittest</span></tt><a class="headerlink" href="#django-utils-unittest" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.utils.unittest</span></tt> provided uniform access to the <tt class="docutils literal"><span class="pre">unittest2</span></tt> library
on all Python versions. Since <tt class="docutils literal"><span class="pre">unittest2</span></tt> became the standard library&#8217;s
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#module-unittest" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">unittest</span></tt></a> module in Python 2.7, and Django 1.7 drops support for older
Python versions, this module isn&#8217;t useful anymore. It has been deprecated. Use
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#module-unittest" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">unittest</span></tt></a> instead.</p>
</div>
<div class="section" id="s-django-utils-datastructures-sorteddict">
<span id="django-utils-datastructures-sorteddict"></span><h3><tt class="docutils literal"><span class="pre">django.utils.datastructures.SortedDict</span></tt><a class="headerlink" href="#django-utils-datastructures-sorteddict" title="Permalink to this headline">¶</a></h3>
<p>As <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">OrderedDict</span></tt></a> was added to the standard library in
Python 2.7, <a class="reference internal" href="../ref/utils.html#django.utils.datastructures.SortedDict" title="django.utils.datastructures.SortedDict"><tt class="xref py py-class docutils literal"><span class="pre">SortedDict</span></tt></a> is no longer
needed and has been deprecated.</p>
<p>The two additional, deprecated methods provided by <tt class="docutils literal"><span class="pre">SortedDict</span></tt> (<tt class="docutils literal"><span class="pre">insert()</span></tt>
and <tt class="docutils literal"><span class="pre">value_for_index()</span></tt>) have been removed. If you relied on these methods to
alter structures like form fields, you should now treat these <tt class="docutils literal"><span class="pre">OrderedDict</span></tt>s
as immutable objects and override them to change their content.</p>
<p>For example, you might want to override <tt class="docutils literal"><span class="pre">MyFormClass.base_fields</span></tt> (although
this attribute isn&#8217;t considered a public API) to change the ordering of fields
for all <tt class="docutils literal"><span class="pre">MyFormClass</span></tt> instances; or similarly, you could override
<tt class="docutils literal"><span class="pre">self.fields</span></tt> from inside <tt class="docutils literal"><span class="pre">MyFormClass.__init__()</span></tt>, to change the fields
for a particular form instance. For example (from Django itself):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">PasswordChangeForm</span><span class="o">.</span><span class="n">base_fields</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
    <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">PasswordChangeForm</span><span class="o">.</span><span class="n">base_fields</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;old_password&#39;</span><span class="p">,</span> <span class="s">&#39;new_password1&#39;</span><span class="p">,</span> <span class="s">&#39;new_password2&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-custom-sql-location-for-models-package">
<span id="custom-sql-location-for-models-package"></span><h3>Custom SQL location for models package<a class="headerlink" href="#custom-sql-location-for-models-package" title="Permalink to this headline">¶</a></h3>
<p>Previously, if models were organized in a package (<tt class="docutils literal"><span class="pre">myapp/models/</span></tt>) rather
than simply <tt class="docutils literal"><span class="pre">myapp/models.py</span></tt>, Django would look for <a class="reference internal" href="../howto/initial-data.html#initial-sql"><em>initial SQL data</em></a> in <tt class="docutils literal"><span class="pre">myapp/models/sql/</span></tt>. This bug has been fixed so that Django
will search <tt class="docutils literal"><span class="pre">myapp/sql/</span></tt> as documented. After this issue was fixed, migrations
were added which deprecates initial SQL data. Thus, while this change still
exists, the deprecation is irrelevant as the entire feature will be removed in
Django 1.9.</p>
</div>
<div class="section" id="s-reorganization-of-django-contrib-sites">
<span id="reorganization-of-django-contrib-sites"></span><h3>Reorganization of <tt class="docutils literal"><span class="pre">django.contrib.sites</span></tt><a class="headerlink" href="#reorganization-of-django-contrib-sites" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">django.contrib.sites</span></tt> provides reduced functionality when it isn&#8217;t in
<a class="reference internal" href="../ref/settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a>. The app-loading refactor adds some constraints in
that situation. As a consequence, two objects were moved, and the old
locations are deprecated:</p>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/sites.html#django.contrib.sites.requests.RequestSite" title="django.contrib.sites.requests.RequestSite"><tt class="xref py py-class docutils literal"><span class="pre">RequestSite</span></tt></a> now lives in
<tt class="docutils literal"><span class="pre">django.contrib.sites.requests</span></tt>.</li>
<li><a class="reference internal" href="../ref/contrib/sites.html#django.contrib.sites.shortcuts.get_current_site" title="django.contrib.sites.shortcuts.get_current_site"><tt class="xref py py-func docutils literal"><span class="pre">get_current_site()</span></tt></a> now lives in
<tt class="docutils literal"><span class="pre">django.contrib.sites.shortcuts</span></tt>.</li>
</ul>
</div>
<div class="section" id="s-declared-fieldsets-attribute-on-modeladmin">
<span id="declared-fieldsets-attribute-on-modeladmin"></span><h3><tt class="docutils literal"><span class="pre">declared_fieldsets</span></tt> attribute on <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt><a class="headerlink" href="#declared-fieldsets-attribute-on-modeladmin" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">ModelAdmin.declared_fieldsets</span></tt> has been deprecated. Despite being a private
API, it will go through a regular deprecation path. This attribute was mostly
used by methods that bypassed <tt class="docutils literal"><span class="pre">ModelAdmin.get_fieldsets()</span></tt> but this was
considered a bug and has been addressed.</p>
</div>
<div class="section" id="s-reorganization-of-django-contrib-contenttypes">
<span id="reorganization-of-django-contrib-contenttypes"></span><h3>Reorganization of <tt class="docutils literal"><span class="pre">django.contrib.contenttypes</span></tt><a class="headerlink" href="#reorganization-of-django-contrib-contenttypes" title="Permalink to this headline">¶</a></h3>
<p>Since <tt class="docutils literal"><span class="pre">django.contrib.contenttypes.generic</span></tt> defined both admin and model
related objects, an import of this module could trigger unexpected side effects.
As a consequence, its contents were split into <a class="reference internal" href="../ref/contrib/contenttypes.html#module-django.contrib.contenttypes" title="django.contrib.contenttypes: Provides generic interface to installed models."><tt class="xref py py-mod docutils literal"><span class="pre">contenttypes</span></tt></a>
submodules and the <tt class="docutils literal"><span class="pre">django.contrib.contenttypes.generic</span></tt> module is deprecated:</p>
<ul class="simple">
<li><a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.fields.GenericForeignKey" title="django.contrib.contenttypes.fields.GenericForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">GenericForeignKey</span></tt></a> and
<a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.fields.GenericRelation" title="django.contrib.contenttypes.fields.GenericRelation"><tt class="xref py py-class docutils literal"><span class="pre">GenericRelation</span></tt></a> now live in
<a class="reference internal" href="../ref/contrib/contenttypes.html#module-django.contrib.contenttypes.fields" title="django.contrib.contenttypes.fields"><tt class="xref py py-mod docutils literal"><span class="pre">fields</span></tt></a>.</li>
<li><a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.forms.BaseGenericInlineFormSet" title="django.contrib.contenttypes.forms.BaseGenericInlineFormSet"><tt class="xref py py-class docutils literal"><span class="pre">BaseGenericInlineFormSet</span></tt></a> and
<a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.forms.generic_inlineformset_factory" title="django.contrib.contenttypes.forms.generic_inlineformset_factory"><tt class="xref py py-func docutils literal"><span class="pre">generic_inlineformset_factory()</span></tt></a> now
live in <a class="reference internal" href="../ref/contrib/contenttypes.html#module-django.contrib.contenttypes.forms" title="django.contrib.contenttypes.forms"><tt class="xref py py-mod docutils literal"><span class="pre">forms</span></tt></a>.</li>
<li><a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.admin.GenericInlineModelAdmin" title="django.contrib.contenttypes.admin.GenericInlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">GenericInlineModelAdmin</span></tt></a>,
<a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.admin.GenericStackedInline" title="django.contrib.contenttypes.admin.GenericStackedInline"><tt class="xref py py-class docutils literal"><span class="pre">GenericStackedInline</span></tt></a> and
<a class="reference internal" href="../ref/contrib/contenttypes.html#django.contrib.contenttypes.admin.GenericTabularInline" title="django.contrib.contenttypes.admin.GenericTabularInline"><tt class="xref py py-class docutils literal"><span class="pre">GenericTabularInline</span></tt></a> now live in
<a class="reference internal" href="../ref/contrib/contenttypes.html#module-django.contrib.contenttypes.admin" title="django.contrib.contenttypes.admin"><tt class="xref py py-mod docutils literal"><span class="pre">admin</span></tt></a>.</li>
</ul>
</div>
<div class="section" id="s-syncdb">
<span id="syncdb"></span><h3><tt class="docutils literal"><span class="pre">syncdb</span></tt><a class="headerlink" href="#syncdb" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../ref/django-admin.html#django-admin-syncdb"><tt class="xref std std-djadmin docutils literal"><span class="pre">syncdb</span></tt></a> command has been deprecated in favor of the new <a class="reference internal" href="../ref/django-admin.html#django-admin-migrate"><tt class="xref std std-djadmin docutils literal"><span class="pre">migrate</span></tt></a>
command. <tt class="docutils literal"><span class="pre">migrate</span></tt> takes the same arguments as <tt class="docutils literal"><span class="pre">syncdb</span></tt> used to plus a few
more, so it&#8217;s safe to just change the name you&#8217;re calling and nothing else.</p>
</div>
<div class="section" id="s-util-modules-renamed-to-utils">
<span id="util-modules-renamed-to-utils"></span><h3><tt class="docutils literal"><span class="pre">util</span></tt> modules renamed to <tt class="docutils literal"><span class="pre">utils</span></tt><a class="headerlink" href="#util-modules-renamed-to-utils" title="Permalink to this headline">¶</a></h3>
<p>The following instances of <tt class="docutils literal"><span class="pre">util.py</span></tt> in the Django codebase have been renamed
to <tt class="docutils literal"><span class="pre">utils.py</span></tt> in an effort to unify all util and utils references:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">django.contrib.admin.util</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.contrib.gis.db.backends.util</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.db.backends.util</span></tt></li>
<li><tt class="docutils literal"><span class="pre">django.forms.util</span></tt></li>
</ul>
</div>
<div class="section" id="s-get-formsets-method-on-modeladmin">
<span id="get-formsets-method-on-modeladmin"></span><h3><tt class="docutils literal"><span class="pre">get_formsets</span></tt> method on <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt><a class="headerlink" href="#get-formsets-method-on-modeladmin" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">ModelAdmin.get_formsets</span></tt> has been deprecated in favor of the new
<a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="django.contrib.admin.ModelAdmin.get_formsets_with_inlines"><tt class="xref py py-meth docutils literal"><span class="pre">get_formsets_with_inlines()</span></tt></a>, in order to
better handle the case of selectively showing inlines on a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>.</p>
</div>
<div class="section" id="s-ipaddressfield">
<span id="ipaddressfield"></span><h3><tt class="docutils literal"><span class="pre">IPAddressField</span></tt><a class="headerlink" href="#ipaddressfield" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../ref/models/fields.html#django.db.models.IPAddressField" title="django.db.models.IPAddressField"><tt class="xref py py-class docutils literal"><span class="pre">django.db.models.IPAddressField</span></tt></a> and
<a class="reference internal" href="../ref/forms/fields.html#django.forms.IPAddressField" title="django.forms.IPAddressField"><tt class="xref py py-class docutils literal"><span class="pre">django.forms.IPAddressField</span></tt></a> fields have been deprecated in favor of
<a class="reference internal" href="../ref/models/fields.html#django.db.models.GenericIPAddressField" title="django.db.models.GenericIPAddressField"><tt class="xref py py-class docutils literal"><span class="pre">django.db.models.GenericIPAddressField</span></tt></a> and
<a class="reference internal" href="../ref/forms/fields.html#django.forms.GenericIPAddressField" title="django.forms.GenericIPAddressField"><tt class="xref py py-class docutils literal"><span class="pre">django.forms.GenericIPAddressField</span></tt></a>.</p>
</div>
<div class="section" id="s-basememcachedcache-get-memcache-timeout-method">
<span id="basememcachedcache-get-memcache-timeout-method"></span><h3><tt class="docutils literal"><span class="pre">BaseMemcachedCache._get_memcache_timeout</span></tt> method<a class="headerlink" href="#basememcachedcache-get-memcache-timeout-method" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">BaseMemcachedCache._get_memcache_timeout()</span></tt> method has been renamed to
<tt class="docutils literal"><span class="pre">get_backend_timeout()</span></tt>. Despite being a private API, it will go through the
normal deprecation.</p>
</div>
<div class="section" id="s-natural-key-serialization-options">
<span id="natural-key-serialization-options"></span><h3>Natural key serialization options<a class="headerlink" href="#natural-key-serialization-options" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">--natural</span></tt> and <tt class="docutils literal"><span class="pre">-n</span></tt> options for <a class="reference internal" href="../ref/django-admin.html#django-admin-dumpdata"><tt class="xref std std-djadmin docutils literal"><span class="pre">dumpdata</span></tt></a> have been
deprecated. Use <a class="reference internal" href="../ref/django-admin.html#django-admin-option---natural-foreign"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--natural-foreign</span></tt></a> instead.</p>
<p>Similarly, the <tt class="docutils literal"><span class="pre">use_natural_keys</span></tt> argument for <tt class="docutils literal"><span class="pre">serializers.serialize()</span></tt>
has been deprecated. Use <tt class="docutils literal"><span class="pre">use_natural_foreign_keys</span></tt> instead.</p>
</div>
<div class="section" id="s-merging-of-post-and-get-arguments-into-wsgirequest-request">
<span id="merging-of-post-and-get-arguments-into-wsgirequest-request"></span><h3>Merging of <tt class="docutils literal"><span class="pre">POST</span></tt> and <tt class="docutils literal"><span class="pre">GET</span></tt> arguments into <tt class="docutils literal"><span class="pre">WSGIRequest.REQUEST</span></tt><a class="headerlink" href="#merging-of-post-and-get-arguments-into-wsgirequest-request" title="Permalink to this headline">¶</a></h3>
<p>It was already strongly suggested that you use <tt class="docutils literal"><span class="pre">GET</span></tt> and <tt class="docutils literal"><span class="pre">POST</span></tt> instead of
<tt class="docutils literal"><span class="pre">REQUEST</span></tt>, because the former are more explicit. The property <tt class="docutils literal"><span class="pre">REQUEST</span></tt> is
deprecated and will be removed in Django 1.9.</p>
</div>
<div class="section" id="s-django-utils-datastructures-mergedict-class">
<span id="django-utils-datastructures-mergedict-class"></span><h3><tt class="docutils literal"><span class="pre">django.utils.datastructures.MergeDict</span></tt> class<a class="headerlink" href="#django-utils-datastructures-mergedict-class" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">MergeDict</span></tt> exists primarily to support merging <tt class="docutils literal"><span class="pre">POST</span></tt> and <tt class="docutils literal"><span class="pre">GET</span></tt>
arguments into a <tt class="docutils literal"><span class="pre">REQUEST</span></tt> property on <tt class="docutils literal"><span class="pre">WSGIRequest</span></tt>. To merge
dictionaries, use <tt class="docutils literal"><span class="pre">dict.update()</span></tt> instead. The class <tt class="docutils literal"><span class="pre">MergeDict</span></tt> is
deprecated and will be removed in Django 1.9.</p>
</div>
<div class="section" id="s-language-codes-zh-cn-zh-tw-and-fy-nl">
<span id="language-codes-zh-cn-zh-tw-and-fy-nl"></span><h3>Language codes <tt class="docutils literal"><span class="pre">zh-cn</span></tt>, <tt class="docutils literal"><span class="pre">zh-tw</span></tt> and <tt class="docutils literal"><span class="pre">fy-nl</span></tt><a class="headerlink" href="#language-codes-zh-cn-zh-tw-and-fy-nl" title="Permalink to this headline">¶</a></h3>
<p>The currently used language codes for Simplified Chinese <tt class="docutils literal"><span class="pre">zh-cn</span></tt>,
Traditional Chinese <tt class="docutils literal"><span class="pre">zh-tw</span></tt> and (Western) Frysian <tt class="docutils literal"><span class="pre">fy-nl</span></tt> are deprecated
and should be replaced by the language codes <tt class="docutils literal"><span class="pre">zh-hans</span></tt>, <tt class="docutils literal"><span class="pre">zh-hant</span></tt> and
<tt class="docutils literal"><span class="pre">fy</span></tt> respectively. If you use these language codes, you should rename the
locale directories and update your settings to reflect these changes. The
deprecated language codes will be removed in Django 1.9.</p>
</div>
<div class="section" id="s-django-utils-functional-memoize-function">
<span id="django-utils-functional-memoize-function"></span><h3><tt class="docutils literal"><span class="pre">django.utils.functional.memoize</span></tt> function<a class="headerlink" href="#django-utils-functional-memoize-function" title="Permalink to this headline">¶</a></h3>
<p>The function <tt class="docutils literal"><span class="pre">memoize</span></tt> is deprecated and should be replaced by the
<tt class="docutils literal"><span class="pre">functools.lru_cache</span></tt> decorator (available from Python 3.2 onwards).</p>
<p>Django ships a backport of this decorator for older Python versions and it&#8217;s
available at <tt class="docutils literal"><span class="pre">django.utils.lru_cache.lru_cache</span></tt>. The deprecated function will
be removed in Django 1.9.</p>
</div>
<div class="section" id="s-geo-sitemaps">
<span id="geo-sitemaps"></span><h3>Geo Sitemaps<a class="headerlink" href="#geo-sitemaps" title="Permalink to this headline">¶</a></h3>
<p>Google has retired support for the Geo Sitemaps format. Hence Django support
for Geo Sitemaps is deprecated and will be removed in Django 1.8.</p>
</div>
<div class="section" id="s-passing-callable-arguments-to-queryset-methods">
<span id="passing-callable-arguments-to-queryset-methods"></span><h3>Passing callable arguments to queryset methods<a class="headerlink" href="#passing-callable-arguments-to-queryset-methods" title="Permalink to this headline">¶</a></h3>
<p>Callable arguments for querysets were an undocumented feature that was
unreliable. It&#8217;s been deprecated and will be removed in Django 1.9.</p>
<p>Callable arguments were evaluated when a queryset was constructed rather than
when it was evaluated, thus this feature didn&#8217;t offer any benefit compared to
evaluating arguments before passing them to queryset and created confusion that
the arguments may have been evaluated at query time.</p>
</div>
<div class="section" id="s-admin-for-setting">
<span id="admin-for-setting"></span><h3><tt class="docutils literal"><span class="pre">ADMIN_FOR</span></tt> setting<a class="headerlink" href="#admin-for-setting" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">ADMIN_FOR</span></tt> feature, part of the admindocs, has been removed. You can
remove the setting from your configuration at your convenience.</p>
</div>
<div class="section" id="s-splitdatetimewidget-with-datetimefield">
<span id="splitdatetimewidget-with-datetimefield"></span><h3><tt class="docutils literal"><span class="pre">SplitDateTimeWidget</span></tt> with <tt class="docutils literal"><span class="pre">DateTimeField</span></tt><a class="headerlink" href="#splitdatetimewidget-with-datetimefield" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">SplitDateTimeWidget</span></tt> support in <a class="reference internal" href="../ref/forms/fields.html#django.forms.DateTimeField" title="django.forms.DateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">DateTimeField</span></tt></a> is
deprecated, use <tt class="docutils literal"><span class="pre">SplitDateTimeWidget</span></tt> with
<a class="reference internal" href="../ref/forms/fields.html#django.forms.SplitDateTimeField" title="django.forms.SplitDateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">SplitDateTimeField</span></tt></a> instead.</p>
</div>
<div class="section" id="s-validate">
<span id="validate"></span><h3><tt class="docutils literal"><span class="pre">validate</span></tt><a class="headerlink" href="#validate" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../ref/django-admin.html#django-admin-validate"><tt class="xref std std-djadmin docutils literal"><span class="pre">validate</span></tt></a> command is deprecated in favor of <a class="reference internal" href="../ref/django-admin.html#django-admin-check"><tt class="xref std std-djadmin docutils literal"><span class="pre">check</span></tt></a> command.</p>
</div>
<div class="section" id="s-django-core-management-basecommand">
<span id="django-core-management-basecommand"></span><h3><tt class="docutils literal"><span class="pre">django.core.management.BaseCommand</span></tt><a class="headerlink" href="#django-core-management-basecommand" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">requires_model_validation</span></tt> is deprecated in favor of a new
<tt class="docutils literal"><span class="pre">requires_system_checks</span></tt> flag. If the latter flag is missing, then the
value of the former flag is used. Defining both <tt class="docutils literal"><span class="pre">requires_system_checks</span></tt> and
<tt class="docutils literal"><span class="pre">requires_model_validation</span></tt> results in an error.</p>
<p>The <tt class="docutils literal"><span class="pre">check()</span></tt> method has replaced the old <tt class="docutils literal"><span class="pre">validate()</span></tt> method.</p>
</div>
<div class="section" id="s-modeladmin-validators">
<span id="modeladmin-validators"></span><h3><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> validators<a class="headerlink" href="#modeladmin-validators" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">ModelAdmin.validator_class</span></tt> and <tt class="docutils literal"><span class="pre">default_validator_class</span></tt> attributes
are deprecated in favor of the new <tt class="docutils literal"><span class="pre">checks_class</span></tt> attribute.</p>
<p>The <tt class="docutils literal"><span class="pre">ModelAdmin.validate()</span></tt> method is deprecated in favor of
<tt class="docutils literal"><span class="pre">ModelAdmin.check()</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">django.contrib.admin.validation</span></tt> module is deprecated.</p>
</div>
<div class="section" id="s-django-db-backends-databasevalidation-validate-field">
<span id="django-db-backends-databasevalidation-validate-field"></span><h3><tt class="docutils literal"><span class="pre">django.db.backends.DatabaseValidation.validate_field</span></tt><a class="headerlink" href="#django-db-backends-databasevalidation-validate-field" title="Permalink to this headline">¶</a></h3>
<p>This method is deprecated in favor of a new <tt class="docutils literal"><span class="pre">check_field</span></tt> method.
The functionality required by <tt class="docutils literal"><span class="pre">check_field()</span></tt> is the same as that provided
by <tt class="docutils literal"><span class="pre">validate_field()</span></tt>, but the output format is different. Third-party database
backends needing this functionality should provide an implementation of
<tt class="docutils literal"><span class="pre">check_field()</span></tt>.</p>
</div>
<div class="section" id="s-loading-ssi-and-url-template-tags-from-future-library">
<span id="loading-ssi-and-url-template-tags-from-future-library"></span><h3>Loading <tt class="docutils literal"><span class="pre">ssi</span></tt> and <tt class="docutils literal"><span class="pre">url</span></tt> template tags from <tt class="docutils literal"><span class="pre">future</span></tt> library<a class="headerlink" href="#loading-ssi-and-url-template-tags-from-future-library" title="Permalink to this headline">¶</a></h3>
<p>Django 1.3 introduced <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">ssi</span> <span class="pre">from</span> <span class="pre">future</span> <span class="pre">%}</span></tt> and
<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">url</span> <span class="pre">from</span> <span class="pre">future</span> <span class="pre">%}</span></tt> syntax for forward compatibility of the
<a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-ssi"><tt class="xref std std-ttag docutils literal"><span class="pre">ssi</span></tt></a> and <a class="reference internal" href="../ref/templates/builtins.html#std:templatetag-url"><tt class="xref std std-ttag docutils literal"><span class="pre">url</span></tt></a> template tags. This syntax is now deprecated and
will be removed in Django 1.9. You can simply remove the
<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">...</span> <span class="pre">from</span> <span class="pre">future</span> <span class="pre">%}</span></tt> tags.</p>
</div>
<div class="section" id="s-django-utils-text-javascript-quote">
<span id="django-utils-text-javascript-quote"></span><h3><tt class="docutils literal"><span class="pre">django.utils.text.javascript_quote</span></tt><a class="headerlink" href="#django-utils-text-javascript-quote" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">javascript_quote()</span></tt> was an undocumented function present in <tt class="docutils literal"><span class="pre">django.utils.text</span></tt>.
It was used internally in the <a class="reference internal" href="../topics/i18n/translation.html#javascript-catalog-view"><em>javascript_catalog view</em></a>
whose implementation was changed to make use of <tt class="docutils literal"><span class="pre">json.dumps()</span></tt> instead.
If you were relying on this function to provide safe output from untrusted
strings, you should use <tt class="docutils literal"><span class="pre">django.utils.html.escapejs</span></tt> or the
<a class="reference internal" href="../ref/templates/builtins.html#std:templatefilter-escapejs"><tt class="xref std std-tfilter docutils literal"><span class="pre">escapejs</span></tt></a> template filter.
If all you need is to generate valid JavaScript strings, you can simply use
<tt class="docutils literal"><span class="pre">json.dumps()</span></tt>.</p>
</div>
<div class="section" id="s-fix-ampersands-utils-method-and-template-filter">
<span id="fix-ampersands-utils-method-and-template-filter"></span><h3><tt class="docutils literal"><span class="pre">fix_ampersands</span></tt> utils method and template filter<a class="headerlink" href="#fix-ampersands-utils-method-and-template-filter" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">django.utils.html.fix_ampersands</span></tt> method and the <tt class="docutils literal"><span class="pre">fix_ampersands</span></tt>
template filter are deprecated, as the escaping of ampersands is already taken care
of by Django&#8217;s standard HTML escaping features. Combining this with <tt class="docutils literal"><span class="pre">fix_ampersands</span></tt>
would either result in double escaping, or, if the output is assumed to be safe,
a risk of introducing XSS vulnerabilities. Along with <tt class="docutils literal"><span class="pre">fix_ampersands</span></tt>,
<tt class="docutils literal"><span class="pre">django.utils.html.clean_html</span></tt> is deprecated, an undocumented function that calls
<tt class="docutils literal"><span class="pre">fix_ampersands</span></tt>.
As this is an accelerated deprecation, <tt class="docutils literal"><span class="pre">fix_ampersands</span></tt> and <tt class="docutils literal"><span class="pre">clean_html</span></tt>
will be removed in Django 1.8.</p>
</div>
<div class="section" id="s-reorganization-of-database-test-settings">
<span id="reorganization-of-database-test-settings"></span><h3>Reorganization of database test settings<a class="headerlink" href="#reorganization-of-database-test-settings" title="Permalink to this headline">¶</a></h3>
<p>All database settings with a <tt class="docutils literal"><span class="pre">TEST_</span></tt> prefix have been deprecated in favor of
entries in a <a class="reference internal" href="../ref/settings.html#std:setting-DATABASE-TEST"><tt class="xref std std-setting docutils literal"><span class="pre">TEST</span></tt></a> dictionary in the database
settings. The old settings will be supported until Django 1.9. For backwards
compatibility with older versions of Django, you can define both versions of
the settings as long as they match.</p>
</div>
<div class="section" id="s-fastcgi-support">
<span id="fastcgi-support"></span><h3>FastCGI support<a class="headerlink" href="#fastcgi-support" title="Permalink to this headline">¶</a></h3>
<p>FastCGI support via the <tt class="docutils literal"><span class="pre">runfcgi</span></tt> management command will be removed in
Django 1.9. Please deploy your project using WSGI.</p>
</div>
<div class="section" id="s-moved-objects-in-contrib-sites">
<span id="moved-objects-in-contrib-sites"></span><h3>Moved objects in <tt class="docutils literal"><span class="pre">contrib.sites</span></tt><a class="headerlink" href="#moved-objects-in-contrib-sites" title="Permalink to this headline">¶</a></h3>
<p>Following the app-loading refactor, two objects in
<tt class="docutils literal"><span class="pre">django.contrib.sites.models</span></tt> needed to be moved because they must be
available without importing <tt class="docutils literal"><span class="pre">django.contrib.sites.models</span></tt> when
<tt class="docutils literal"><span class="pre">django.contrib.sites</span></tt> isn&#8217;t installed. Import <tt class="docutils literal"><span class="pre">RequestSite</span></tt> from
<tt class="docutils literal"><span class="pre">django.contrib.sites.requests</span></tt> and <tt class="docutils literal"><span class="pre">get_current_site()</span></tt> from
<tt class="docutils literal"><span class="pre">django.contrib.sites.shortcuts</span></tt>. The old import locations will work until
Django 1.9.</p>
</div>
<div class="section" id="s-django-forms-forms-get-declared-fields">
<span id="django-forms-forms-get-declared-fields"></span><h3><tt class="docutils literal"><span class="pre">django.forms.forms.get_declared_fields()</span></tt><a class="headerlink" href="#django-forms-forms-get-declared-fields" title="Permalink to this headline">¶</a></h3>
<p>Django no longer uses this functional internally. Even though it&#8217;s a private
API, it&#8217;ll go through the normal deprecation cycle.</p>
</div>
<div class="section" id="s-private-query-lookup-apis">
<span id="private-query-lookup-apis"></span><h3>Private Query Lookup APIs<a class="headerlink" href="#private-query-lookup-apis" title="Permalink to this headline">¶</a></h3>
<p>Private APIs <tt class="docutils literal"><span class="pre">django.db.models.sql.where.WhereNode.make_atom()</span></tt> and
<tt class="docutils literal"><span class="pre">django.db.models.sql.where.Constraint</span></tt> are deprecated in favor of the new
<a class="reference internal" href="../ref/models/lookups.html"><em>custom lookups API</em></a>.</p>
</div>
</div>
<div class="section" id="s-features-removed-in-1-7">
<span id="features-removed-in-1-7"></span><h2>Features removed in 1.7<a class="headerlink" href="#features-removed-in-1-7" title="Permalink to this headline">¶</a></h2>
<p>These features have reached the end of their
<a class="reference internal" href="../internals/deprecation.html#deprecation-removed-in-1-7"><em>deprecation cycle</em></a> and so have been
removed in Django 1.7 (please see the
<a class="reference internal" href="../internals/deprecation.html#deprecation-removed-in-1-7"><em>deprecation timeline</em></a> for more details):</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">django.utils.simplejson</span></tt> is removed.</li>
<li><tt class="docutils literal"><span class="pre">django.utils.itercompat.product</span></tt> is removed.</li>
<li>INSTALLED_APPS and TEMPLATE_DIRS are no longer corrected from a plain
string into a tuple.</li>
<li><a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a>,
<a class="reference internal" href="../ref/template-response.html#django.template.response.SimpleTemplateResponse" title="django.template.response.SimpleTemplateResponse"><tt class="xref py py-class docutils literal"><span class="pre">SimpleTemplateResponse</span></tt></a>,
<a class="reference internal" href="../ref/template-response.html#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><tt class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></tt></a>,
<a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.render_to_response" title="django.shortcuts.render_to_response"><tt class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></tt></a>,
<a class="reference internal" href="../ref/contrib/sitemaps.html#django.contrib.sitemaps.views.index" title="django.contrib.sitemaps.views.index"><tt class="xref py py-func docutils literal"><span class="pre">index()</span></tt></a>, and
<a class="reference internal" href="../ref/contrib/sitemaps.html#django.contrib.sitemaps.views.sitemap" title="django.contrib.sitemaps.views.sitemap"><tt class="xref py py-func docutils literal"><span class="pre">sitemap()</span></tt></a> no longer take a <tt class="docutils literal"><span class="pre">mimetype</span></tt>
argument</li>
<li><a class="reference internal" href="../ref/request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> immediately consumes its content if it&#8217;s
an iterator.</li>
<li>The <tt class="docutils literal"><span class="pre">AUTH_PROFILE_MODULE</span></tt> setting, and the <tt class="docutils literal"><span class="pre">get_profile()</span></tt> method on
the User model are removed.</li>
<li>The <tt class="docutils literal"><span class="pre">cleanup</span></tt> management command is removed.</li>
<li>The <tt class="docutils literal"><span class="pre">daily_cleanup.py</span></tt> script is removed.</li>
<li><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.select_related" title="django.db.models.query.QuerySet.select_related"><tt class="xref py py-meth docutils literal"><span class="pre">select_related()</span></tt></a> no longer has a
<tt class="docutils literal"><span class="pre">depth</span></tt> keyword argument.</li>
<li>The <tt class="docutils literal"><span class="pre">get_warnings_state()</span></tt>/<tt class="docutils literal"><span class="pre">restore_warnings_state()</span></tt>
functions from <a class="reference internal" href="../topics/testing/advanced.html#module-django.test.utils" title="django.test.utils: Helpers to write custom test runners."><tt class="xref py py-mod docutils literal"><span class="pre">django.test.utils</span></tt></a> and the <tt class="docutils literal"><span class="pre">save_warnings_state()</span></tt>/
<tt class="docutils literal"><span class="pre">restore_warnings_state()</span></tt>
<a class="reference internal" href="../topics/testing/tools.html#django-testcase-subclasses"><em>django.test.*TestCase</em></a> are removed.</li>
<li>The <tt class="docutils literal"><span class="pre">check_for_test_cookie</span></tt> method in
<a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm" title="django.contrib.auth.forms.AuthenticationForm"><tt class="xref py py-class docutils literal"><span class="pre">AuthenticationForm</span></tt></a> is removed.</li>
<li>The version of <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.views.password_reset_confirm" title="django.contrib.auth.views.password_reset_confirm"><tt class="xref py py-func docutils literal"><span class="pre">django.contrib.auth.views.password_reset_confirm()</span></tt></a> that
supports base36 encoded user IDs
(<tt class="docutils literal"><span class="pre">django.contrib.auth.views.password_reset_confirm_uidb36</span></tt>) is removed.</li>
<li>The <tt class="docutils literal"><span class="pre">django.utils.encoding.StrAndUnicode</span></tt> mix-in is removed.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Django 1.7 release notes</a><ul>
<li><a class="reference internal" href="#python-compatibility">Python compatibility</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-1-7">What&#8217;s new in Django 1.7</a><ul>
<li><a class="reference internal" href="#schema-migrations">Schema migrations</a></li>
<li><a class="reference internal" href="#app-loading-refactor">App-loading refactor</a></li>
<li><a class="reference internal" href="#new-method-on-field-subclasses">New method on Field subclasses</a></li>
<li><a class="reference internal" href="#calling-custom-queryset-methods-from-the-manager">Calling custom <tt class="docutils literal"><span class="pre">QuerySet</span></tt> methods from the <tt class="docutils literal"><span class="pre">Manager</span></tt></a></li>
<li><a class="reference internal" href="#using-a-custom-manager-when-traversing-reverse-relations">Using a custom manager when traversing reverse relations</a></li>
<li><a class="reference internal" href="#new-system-check-framework">New system check framework</a></li>
<li><a class="reference internal" href="#new-prefetch-object-for-advanced-prefetch-related-operations">New <tt class="docutils literal"><span class="pre">Prefetch</span></tt> object for advanced <tt class="docutils literal"><span class="pre">prefetch_related</span></tt> operations.</a></li>
<li><a class="reference internal" href="#admin-shortcuts-support-time-zones">Admin shortcuts support time zones</a></li>
<li><a class="reference internal" href="#using-database-cursors-as-context-managers">Using database cursors as context managers</a></li>
<li><a class="reference internal" href="#custom-lookups">Custom lookups</a></li>
<li><a class="reference internal" href="#improvements-to-form-error-handling">Improvements to <tt class="docutils literal"><span class="pre">Form</span></tt> error handling</a><ul>
<li><a class="reference internal" href="#form-add-error"><tt class="docutils literal"><span class="pre">Form.add_error()</span></tt></a></li>
<li><a class="reference internal" href="#error-metadata">Error metadata</a></li>
<li><a class="reference internal" href="#error-containers-and-backward-compatibility">Error containers and backward compatibility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#minor-features">Minor features</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><tt class="docutils literal"><span class="pre">django.contrib.admin</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-formtools"><tt class="docutils literal"><span class="pre">django.contrib.formtools</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><tt class="docutils literal"><span class="pre">django.contrib.gis</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-messages"><tt class="docutils literal"><span class="pre">django.contrib.messages</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-redirects"><tt class="docutils literal"><span class="pre">django.contrib.redirects</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-sessions"><tt class="docutils literal"><span class="pre">django.contrib.sessions</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-sitemaps"><tt class="docutils literal"><span class="pre">django.contrib.sitemaps</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-sites"><tt class="docutils literal"><span class="pre">django.contrib.sites</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-staticfiles"><tt class="docutils literal"><span class="pre">django.contrib.staticfiles</span></tt></a></li>
<li><a class="reference internal" href="#django-contrib-syndication"><tt class="docutils literal"><span class="pre">django.contrib.syndication</span></tt></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#cross-site-request-forgery">Cross Site Request Forgery</a></li>
<li><a class="reference internal" href="#email">Email</a></li>
<li><a class="reference internal" href="#file-storage">File Storage</a></li>
<li><a class="reference internal" href="#file-uploads">File Uploads</a></li>
<li><a class="reference internal" href="#forms">Forms</a></li>
<li><a class="reference internal" href="#internationalization">Internationalization</a></li>
<li><a class="reference internal" href="#management-commands">Management Commands</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requests and Responses</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
<li><a class="reference internal" href="#validators">Validators</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-1-7">Backwards incompatible changes in 1.7</a><ul>
<li><a class="reference internal" href="#allow-syncdb-allow-migrate">allow_syncdb/allow_migrate</a></li>
<li><a class="reference internal" href="#initial-data">initial_data</a></li>
<li><a class="reference internal" href="#deconstruct-and-serializability">deconstruct() and serializability</a></li>
<li><a class="reference internal" href="#app-loading-changes">App-loading changes</a><ul>
<li><a class="reference internal" href="#start-up-sequence">Start-up sequence</a></li>
<li><a class="reference internal" href="#standalone-scripts">Standalone scripts</a></li>
<li><a class="reference internal" href="#wsgi-scripts">WSGI scripts</a></li>
<li><a class="reference internal" href="#app-registry-consistency">App registry consistency</a></li>
<li><a class="reference internal" href="#subclassing-appcommand">Subclassing AppCommand</a></li>
<li><a class="reference internal" href="#introspecting-applications">Introspecting applications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#management-commands-and-order-of-installed-apps">Management commands and order of <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a></li>
<li><a class="reference internal" href="#validationerror-constructor-and-internal-storage"><tt class="docutils literal"><span class="pre">ValidationError</span></tt> constructor and internal storage</a></li>
<li><a class="reference internal" href="#behavior-of-locmemcache-regarding-pickle-errors">Behavior of <tt class="docutils literal"><span class="pre">LocMemCache</span></tt> regarding pickle errors</a></li>
<li><a class="reference internal" href="#cache-keys-are-now-generated-from-the-request-s-absolute-url">Cache keys are now generated from the request&#8217;s absolute URL</a></li>
<li><a class="reference internal" href="#passing-none-to-manager-db-manager">Passing <tt class="docutils literal"><span class="pre">None</span></tt> to <tt class="docutils literal"><span class="pre">Manager.db_manager()</span></tt></a></li>
<li><a class="reference internal" href="#pytz-may-be-required">pytz may be required</a></li>
<li><a class="reference internal" href="#remove-and-clear-methods-of-related-managers"><tt class="docutils literal"><span class="pre">remove()</span></tt> and <tt class="docutils literal"><span class="pre">clear()</span></tt> methods of related managers</a></li>
<li><a class="reference internal" href="#admin-login-redirection-strategy">Admin login redirection strategy</a></li>
<li><a class="reference internal" href="#select-for-update-requires-a-transaction"><tt class="docutils literal"><span class="pre">select_for_update()</span></tt> requires a transaction</a></li>
<li><a class="reference internal" href="#contrib-middleware-removed-from-default-middleware-classes">Contrib middleware removed from default <tt class="docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt></a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-1-7">Features deprecated in 1.7</a><ul>
<li><a class="reference internal" href="#django-core-cache-get-cache"><tt class="docutils literal"><span class="pre">django.core.cache.get_cache</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-dictconfig-django-utils-importlib"><tt class="docutils literal"><span class="pre">django.utils.dictconfig</span></tt>/<tt class="docutils literal"><span class="pre">django.utils.importlib</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-module-loading-import-by-path"><tt class="docutils literal"><span class="pre">django.utils.module_loading.import_by_path</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-tzinfo"><tt class="docutils literal"><span class="pre">django.utils.tzinfo</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-unittest"><tt class="docutils literal"><span class="pre">django.utils.unittest</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-datastructures-sorteddict"><tt class="docutils literal"><span class="pre">django.utils.datastructures.SortedDict</span></tt></a></li>
<li><a class="reference internal" href="#custom-sql-location-for-models-package">Custom SQL location for models package</a></li>
<li><a class="reference internal" href="#reorganization-of-django-contrib-sites">Reorganization of <tt class="docutils literal"><span class="pre">django.contrib.sites</span></tt></a></li>
<li><a class="reference internal" href="#declared-fieldsets-attribute-on-modeladmin"><tt class="docutils literal"><span class="pre">declared_fieldsets</span></tt> attribute on <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt></a></li>
<li><a class="reference internal" href="#reorganization-of-django-contrib-contenttypes">Reorganization of <tt class="docutils literal"><span class="pre">django.contrib.contenttypes</span></tt></a></li>
<li><a class="reference internal" href="#syncdb"><tt class="docutils literal"><span class="pre">syncdb</span></tt></a></li>
<li><a class="reference internal" href="#util-modules-renamed-to-utils"><tt class="docutils literal"><span class="pre">util</span></tt> modules renamed to <tt class="docutils literal"><span class="pre">utils</span></tt></a></li>
<li><a class="reference internal" href="#get-formsets-method-on-modeladmin"><tt class="docutils literal"><span class="pre">get_formsets</span></tt> method on <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt></a></li>
<li><a class="reference internal" href="#ipaddressfield"><tt class="docutils literal"><span class="pre">IPAddressField</span></tt></a></li>
<li><a class="reference internal" href="#basememcachedcache-get-memcache-timeout-method"><tt class="docutils literal"><span class="pre">BaseMemcachedCache._get_memcache_timeout</span></tt> method</a></li>
<li><a class="reference internal" href="#natural-key-serialization-options">Natural key serialization options</a></li>
<li><a class="reference internal" href="#merging-of-post-and-get-arguments-into-wsgirequest-request">Merging of <tt class="docutils literal"><span class="pre">POST</span></tt> and <tt class="docutils literal"><span class="pre">GET</span></tt> arguments into <tt class="docutils literal"><span class="pre">WSGIRequest.REQUEST</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-datastructures-mergedict-class"><tt class="docutils literal"><span class="pre">django.utils.datastructures.MergeDict</span></tt> class</a></li>
<li><a class="reference internal" href="#language-codes-zh-cn-zh-tw-and-fy-nl">Language codes <tt class="docutils literal"><span class="pre">zh-cn</span></tt>, <tt class="docutils literal"><span class="pre">zh-tw</span></tt> and <tt class="docutils literal"><span class="pre">fy-nl</span></tt></a></li>
<li><a class="reference internal" href="#django-utils-functional-memoize-function"><tt class="docutils literal"><span class="pre">django.utils.functional.memoize</span></tt> function</a></li>
<li><a class="reference internal" href="#geo-sitemaps">Geo Sitemaps</a></li>
<li><a class="reference internal" href="#passing-callable-arguments-to-queryset-methods">Passing callable arguments to queryset methods</a></li>
<li><a class="reference internal" href="#admin-for-setting"><tt class="docutils literal"><span class="pre">ADMIN_FOR</span></tt> setting</a></li>
<li><a class="reference internal" href="#splitdatetimewidget-with-datetimefield"><tt class="docutils literal"><span class="pre">SplitDateTimeWidget</span></tt> with <tt class="docutils literal"><span class="pre">DateTimeField</span></tt></a></li>
<li><a class="reference internal" href="#validate"><tt class="docutils literal"><span class="pre">validate</span></tt></a></li>
<li><a class="reference internal" href="#django-core-management-basecommand"><tt class="docutils literal"><span class="pre">django.core.management.BaseCommand</span></tt></a></li>
<li><a class="reference internal" href="#modeladmin-validators"><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> validators</a></li>
<li><a class="reference internal" href="#django-db-backends-databasevalidation-validate-field"><tt class="docutils literal"><span class="pre">django.db.backends.DatabaseValidation.validate_field</span></tt></a></li>
<li><a class="reference internal" href="#loading-ssi-and-url-template-tags-from-future-library">Loading <tt class="docutils literal"><span class="pre">ssi</span></tt> and <tt class="docutils literal"><span class="pre">url</span></tt> template tags from <tt class="docutils literal"><span class="pre">future</span></tt> library</a></li>
<li><a class="reference internal" href="#django-utils-text-javascript-quote"><tt class="docutils literal"><span class="pre">django.utils.text.javascript_quote</span></tt></a></li>
<li><a class="reference internal" href="#fix-ampersands-utils-method-and-template-filter"><tt class="docutils literal"><span class="pre">fix_ampersands</span></tt> utils method and template filter</a></li>
<li><a class="reference internal" href="#reorganization-of-database-test-settings">Reorganization of database test settings</a></li>
<li><a class="reference internal" href="#fastcgi-support">FastCGI support</a></li>
<li><a class="reference internal" href="#moved-objects-in-contrib-sites">Moved objects in <tt class="docutils literal"><span class="pre">contrib.sites</span></tt></a></li>
<li><a class="reference internal" href="#django-forms-forms-get-declared-fields"><tt class="docutils literal"><span class="pre">django.forms.forms.get_declared_fields()</span></tt></a></li>
<li><a class="reference internal" href="#private-query-lookup-apis">Private Query Lookup APIs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-1-7">Features removed in 1.7</a></li>
</ul>
</li>
</ul>

  <h3>Browse</h3>
  <ul>
    
      <li>Prev: <a href="1.7.1.html">Django 1.7.1 release notes</a></li>
    
    
      <li>Next: <a href="1.6.11.html">Django 1.6.11 release notes</a></li>
    
  </ul>
  <h3>You are here:</h3>
  <ul>
      <li>
        <a href="../index.html">Django 1.8.2.dev20150505153848 documentation</a>
        
          <ul><li><a href="index.html">Release notes</a>
        
        <ul><li>Django 1.7 release notes</li></ul>
        </li></ul>
      </li>
  </ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/releases/1.7.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">May 06, 2015</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="1.7.1.html" title="Django 1.7.1 release notes">previous</a>
     |
    <a href="index.html" title="Release notes" accesskey="U">up</a>
   |
    <a href="1.6.11.html" title="Django 1.6.11 release notes">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>